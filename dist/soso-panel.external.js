var V={},de={layout:"row",visible:!0},d=(o,t,n={})=>{V[o]={...de,...n,component:t}},P=o=>o in V?!0:(console.warn(`control of type "${o}" is requested but not registered`),!1),$=o=>{if(!P(o.type))return;let{component:t,...n}=V[o.type];return n},q=o=>{if(!P(o.type))return;let{component:t,...n}=V[o.type];return t};import{jsx as he}from"preact/jsx-runtime";var me=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id];return he("button",{type:"button",onClick:()=>n({[e.id]:{value:!0}},{event:!0}),children:e.text??e.id})};d("button",me,{label:null});import{useState as O,useEffect as ge}from"preact/hooks";var U=o=>o.trim()==="",W=o=>isFinite(o),fe=(o,t)=>String(o)!==t,ve=(o,t,n)=>o>=t&&o<=n,be=(o,t,n)=>Math.min(Math.max(o,t),n),N=({value:o,min:t=-1/0,max:n=1/0,commit:e})=>{let[s,r]=O(String(o)),[i,l]=O(o);ge(()=>{r(String(o)),l(o)},[o]);function p(a){let h=String(a);if(r(h),U(h))return;let m=Number(h);!W(m)||!ve(m,t,n)||fe(m,h)||(l(m),e(m))}function c(){if(U(s)||!W(Number(s))){r(String(i));return}let a=Number(s),h=be(a,t,n);r(String(h)),l(h),e(h)}return{value:o,text:s,setValue:p,handleBlur:c}},C=o=>Array.isArray(o)&&o.every(t=>t!=null&&typeof t=="object"&&!Array.isArray(t)&&"label"in t&&"value"in t)?o:Array.isArray(o)?o.map(t=>({label:String(t),value:t})):o&&typeof o=="object"?Object.entries(o).map(([t,n])=>({label:t,value:n})):[];import{jsx as G}from"preact/jsx-runtime";var xe=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],s=C(e.options).map(({label:r,value:i},l)=>{let p=e.value===i?"soso-selected":"";return G("button",{onClick:()=>n({[e.id]:{value:i}}),className:`${p}`,type:"button",children:r},r)});return G("div",{className:"soso-buttons",children:s})};d("buttons",xe,{value:o=>C(o.options)[0]?.value});import{useState as _,useEffect as ye}from"preact/hooks";import{Fragment as Se,jsx as H,jsxs as Ne}from"preact/jsx-runtime";var we=o=>"#ffffff",ke=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],[s,r]=_(e.value),[i,l]=_(e.value);ye(()=>{r(e.value)},[e.value]);let p=h=>h.startsWith("#")&&h.length===7&&CSS.supports("color",h),c=h=>{let m=h.currentTarget.value,f=p(m)?m:i;n({[e.id]:{value:f}}),r(f)},a=h=>{let m=h.currentTarget.value;p(m)&&(n({[e.id]:{value:m}}),l(m))};return Ne(Se,{children:[H("input",{type:"color",value:s,onInput:a,className:"soso-color-picker"}),H("input",{type:"text",className:"soso-fixed",size:"7",value:s,onInput:a,onChange:c})]})};d("color",ke,{value:we});import{jsx as E}from"preact/jsx-runtime";var Ce=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id];switch(e.format){case"monospace":return E("span",{className:"soso-display soso-monospace",children:e.value});case"block":return E("pre",{className:"soso-display soso-monospace",children:e.value});case"html":return E("span",{className:"soso-display",dangerouslySetInnerHTML:{__html:e.value??""}});default:return E("span",{className:"soso-display",children:e.value})}};d("display",Ce,{value:"",format:"text"});import{useRef as Xe,useState as J,useEffect as K}from"preact/hooks";import{jsx as ze}from"preact/jsx-runtime";var Ye=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],s=Xe(null),[r,i]=J(Array(e.samples).fill(0)),[l,p]=J({min:null,max:null});return K(()=>{i(c=>[...c,e.value].slice(-e.samples)),p(c=>({min:c.min===null?e.value:Math.min(c.min,e.value),max:c.max===null?e.value:Math.max(c.max,e.value)}))},[e]),K(()=>{let c=s.current;if(!c)return;let a=c.getContext("2d"),h=c.getBoundingClientRect(),m=window.devicePixelRatio||1,f=h.width,v=e.height;c.width=f*m,c.height=v*m,a.scale(m,m),c.style.width=f+"px",c.style.height=v+"px",a.clearRect(0,0,f,v);let u=c.closest(".soso-panel"),x=getComputedStyle(u).getPropertyValue("--panel-fg").trim()||"#aaa",y=e.min??l.min??0,b=e.max??l.max??1,k=b-y||1,S=1/(e.samples-1)*f;a.fillStyle=x,a.globalAlpha=.5,a.beginPath(),a.moveTo(0,v),r.forEach((Y,z)=>{let I=(Y-y)/k*v,L=z*S,B=v-I;a.lineTo(L,B)}),a.lineTo(f,v),a.fill(),a.globalAlpha=1,a.font="10px ui-monospace, monospace",a.textBaseline="top",a.textAlign="left",a.fillText(b,3,0),a.textBaseline="bottom",a.fillText(y,3,v)},[r,l,e]),ze("canvas",{className:"soso-graph",ref:s,height:e.height})};d("graph",Ye,{height:60,samples:60});import"preact/hooks";import{jsx as M,jsxs as Te}from"preact/jsx-runtime";var A=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id];if(!e.visible)return null;let s=q(e);if(!s)return null;let r=M(s,{nodes:o,treeNode:t,update:n});if(e.layout==="block")return r;let i=!(e.label===""||e.label===null);return Te("div",{className:"soso-row",role:"group","aria-label":e.label??e.id,children:[i&&M("span",{className:"soso-label",children:e.label??e.id}),M("div",{className:"soso-control",children:r})]})};import{jsx as R,jsxs as Q}from"preact/jsx-runtime";var Ve=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],s=t.nodes.map((p,c)=>R(A,{nodes:o,treeNode:p,update:n},p.id)),r=e.expanded?"soso-expanded":"soso-collapsed",i=e.showLabel?"soso-show-label":"soso-hide-label",l=!(e.label===""||e.label===null);return Q("div",{className:`soso-group ${r} ${i}`,children:[l&&Q("span",{className:"soso-label",onClick:()=>{e.expandable&&n({[e.id]:{expanded:!e.expanded}})},children:[e.expandable&&R("span",{className:"soso-icon",children:"\u2303"}),e.label??e.id]}),R("div",{className:"soso-container",children:s})]})};d("group",Ve,{layout:"block",expandable:!0,expanded:!0});import{jsx as Ae}from"preact/jsx-runtime";var Ee=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],{text:s,setValue:r,handleBlur:i}=N({value:e.value,min:e.min,max:e.max,commit:l=>n({[e.id]:{value:l}})});return Ae("input",{className:"soso-number-input",type:"text",value:s,onInput:l=>r(l.currentTarget.value),onChange:i})};d("number",Ee,{value:()=>0});import{useState as D,useEffect as Z}from"preact/hooks";import{Fragment as Le,jsx as w,jsxs as X}from"preact/jsx-runtime";var j=(o,t)=>{let n=1/t;return Math.round(o*n)/n},Ie=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],{x:s,y:r}=e.value,[i,l]=D(!1),[p,c]=D(null),[a,h]=D({height:176,width:176,space:6,radius:2});Z(()=>{let u=document.querySelector(".soso-panel");if(!u)return;let g=getComputedStyle(u),x=g.getPropertyValue("--panel-width"),y=g.getPropertyValue("--label-width"),b=g.getPropertyValue("--panel-radius"),k=g.getPropertyValue("--panel-space"),S=parseFloat(x)-parseFloat(y)-2*parseFloat(k),Y=parseFloat(b),z=parseFloat(k);h({width:S,height:S,radius:Y,space:z})},[]);let m=N({value:e.value.x,min:e.minX,max:e.maxX,commit:u=>n({[e.id]:{value:{...e.value,x:u}}})}),f=N({value:e.value.y,min:e.minY,max:e.maxY,commit:u=>n({[e.id]:{value:{...e.value,y:u}}})});Z(()=>{if(!i||!p)return;let u=document.body.style.cursor;document.body.style.cursor="grabbing";let g=b=>{let k=b.clientX??b.touches?.[0]?.clientX,S=b.clientY??b.touches?.[0]?.clientY;if(k===void 0||S===void 0)return;let Y=k-p.pointerX,z=S-p.pointerY,I=p.valueX+Y*e.scale,L=p.valueY+z*e.scale,B=Math.max(e.minX,Math.min(e.maxX,I)),pe=Math.max(e.minY,Math.min(e.maxY,L)),ce=j(B,e.step),ue=j(pe,e.step);n({[e.id]:{value:{x:ce,y:ue}}})},x=()=>{l(!1),c(null)},y=b=>(b.preventDefault(),!1);return document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",x),()=>{document.body.style.cursor=u,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",x)}},[i,p,e]);let v=(u,g=null)=>{let x=u.clientX??u.touches?.[0]?.clientX,y=u.clientY??u.touches?.[0]?.clientY;l(!0),c({pointerX:x,pointerY:y,valueX:g?.x??e.value.x,valueY:g?.y??e.value.y})};return X(Le,{children:[w("button",{onMouseDown:u=>{u.preventDefault(),v(u)},onTouchStart:u=>{u.preventDefault(),v(u)},className:`soso-translate ${i?"soso-selected":""}`,type:"button",style:{touchAction:"none",userSelect:"none"},children:"\u2316"}),w("input",{className:"soso-number-input soso-fixed",type:"text",size:"7",value:m.text,onInput:u=>m.setValue(u.currentTarget.value),onChange:m.handleBlur}),w("input",{className:"soso-number-input soso-fixed",type:"text",size:"7",value:f.text,onInput:u=>f.setValue(u.currentTarget.value),onChange:f.handleBlur}),i&&w("div",{className:"soso-pad2",children:X("svg",{width:a.width,height:a.height,style:{position:"absolute",top:0,left:0,borderRadius:a.radius},children:[w("rect",{width:a.width,height:a.height,fill:"transparent",className:"soso-border",rx:a.radius}),w("line",{x1:a.width/2,y1:0,x2:a.width/2,y2:a.height,className:"soso-grid"}),w("line",{x1:0,y1:a.height/2,x2:a.width,y2:a.height/2,className:"soso-grid"}),X("text",{x:a.space,y:a.space,className:"soso-label","dominant-baseline":"hanging","font-size":"10",children:[e.minX,",",e.minY]}),X("text",{x:a.width-a.space,y:a.space,"dominant-baseline":"hanging",className:"soso-label","font-size":"10","text-anchor":"end",children:[e.maxX,",",e.minY]}),X("text",{x:a.space,y:a.height-a.space,className:"soso-label","font-size":"10",children:[e.minX,",",e.maxY]}),X("text",{x:a.width-a.space,y:a.height-a.space,className:"soso-label","font-size":"10","text-anchor":"end",children:[e.maxX,",",e.maxY]}),w("circle",{cx:(s-e.minX)/(e.maxX-e.minX)*a.width,cy:(r-e.minY)/(e.maxY-e.minY)*a.height,r:6,className:"soso-indicator"})]})})]})};d("pad2",Ie,{value:o=>({x:o.minX+(o.maxX-o.minX)*.5,y:o.minY+(o.maxY-o.minY)*.5}),scale:.01,step:.01,minX:-1,maxX:1,minY:-1,maxY:1});import{Fragment as Me,jsx as ee,jsxs as Re}from"preact/jsx-runtime";var Be=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],{text:s,setValue:r,handleBlur:i}=N({value:e.value,min:e.min,max:e.max,commit:l=>n({[e.id]:{value:l}})});return Re(Me,{children:[ee("input",{type:"range",value:s,min:e.min,max:e.max,step:e.step??1,onInput:l=>r(l.currentTarget.value)}),ee("input",{type:"text",size:"7",className:"soso-number-input soso-fixed",value:s,onInput:l=>r(l.currentTarget.value),onChange:i})]})};d("range",Be,{value:o=>o.min??0});import{jsx as oe}from"preact/jsx-runtime";var De=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],s=C(e.options),r=p=>{let c=Number(p.currentTarget.value),a=s[c].value;n({[e.id]:{value:a}})},i=s.map(({label:p},c)=>oe("option",{value:c,children:p},p)),l=s.findIndex(({value:p})=>p===e.value);return oe("select",{value:l<0?"":l,onChange:r,children:i})};d("select",De,{value:o=>C(o.options)[0]?.value});import{jsx as te}from"preact/jsx-runtime";var Fe=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id],s=r=>{n({[e.id]:{value:r.currentTarget.value}})};return e.multiline?te("textarea",{value:e.value,onInput:s,rows:e.rows}):te("input",{type:"text",value:e.value,onInput:s})};d("text",Fe,{value:"",multiline:!1,rows:4});import{jsx as $e}from"preact/jsx-runtime";var Pe=({nodes:o,treeNode:t,update:n})=>{let e=o[t.id];return $e("input",{type:"checkbox",checked:e.value,onInput:s=>n({[e.id]:{value:s.currentTarget.checked}})})};d("toggle",Pe,{value:o=>!1});import{render as re}from"preact";var ne='.soso-panel-container{position:fixed;top:0;right:0}.soso-panel{--panel-bg: hsl(230 7% 10%);--panel-fg: hsl(230 10% 75%);--panel-border: hsl(230 9% 18%);--panel-hover: hsl(230 9% 26%);--panel-pressed: hsl(230 7% 16%);--panel-low-emphasis: hsl(230 4% 55%);--panel-focus: var(--panel-fg);--panel-selection-fg: var(--panel-bg);--panel-selection-bg: var(--panel-fg);--value-number: hsl(220 80% 65%);--value-string: hsl(139 45% 56%);--panel-space: 4px;--panel-radius: 2px;--panel-width: 256px;--label-width: 80px;--row-height: 20px;--font-ui: system-ui, -apple-system, sans-serif;--font-value: ui-monospace, monospace;--font-size-normal: 11px;--line-height-normal: 1.4;--color-link: var(--value-number);--panel-tween-func: cubic-bezier(.25, .8, .5, 1);--panel-tween-duration: .2s;--checkbox-check-width: 3px;--checkbox-check-height: 9px;width:var(--panel-width);color:var(--panel-fg);font-family:var(--font-ui);font-size:var(--font-size-normal);line-height:var(--line-height-normal);box-sizing:border-box;font-variant-numeric:tabular-nums}.soso-panel .soso-row{display:flex;flex-direction:row;gap:var(--panel-space);padding:var(--panel-space) var(--panel-space)}.soso-panel .soso-row+.soso-row{padding-top:calc(var(--panel-space) * .5)}.soso-panel .soso-row:has(+.soso-row){padding-bottom:calc(var(--panel-space) * .5)}.soso-panel .soso-container .soso-container{border-bottom:1px solid var(--panel-border)}.soso-panel .soso-row .soso-label{display:flex;align-self:flex-start;align-items:center;line-height:1.2;min-height:20px;min-width:0;user-select:none;color:var(--panel-low-emphasis);flex:0 0 var(--label-width)}.soso-panel .soso-group{display:flex;flex-direction:column;background:var(--panel-bg);border-radius:var(--panel-radius)}.soso-panel-container>.soso-panel>.soso-group>.soso-label{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.soso-panel .soso-group>.soso-label{display:flex;align-items:center;user-select:none;background:var(--panel-border);border-radius:var(--panel-radius);height:var(--row-height);padding-left:var(--panel-space);gap:var(--panel-space)}.soso-panel .soso-group>.soso-label:has(>.soso-icon){cursor:pointer}.soso-panel .soso-group>.soso-label>.soso-icon{font-weight:700;font-size:10px;cursor:pointer}@media (prefers-reduced-motion: no-preference){.soso-panel .soso-group>.soso-label>.soso-icon{transition:transform var(--panel-tween-duration) var(--panel-tween-func)}}.soso-panel .soso-group.soso-expanded>.soso-label>.soso-icon{transform:rotate(180deg)}.soso-panel .soso-group>.soso-container{flex-direction:column;overflow:hidden;display:none}.soso-panel .soso-group.soso-expanded>.soso-container{display:flex}@supports (interpolate-size: allow-keywords){.soso-panel .soso-group>.soso-container{display:flex;interpolate-size:allow-keywords;height:0;opacity:0}@media (prefers-reduced-motion: no-preference){.soso-panel .soso-group>.soso-container{transition:height var(--panel-tween-duration) var(--panel-tween-func),padding var(--panel-tween-duration) var(--panel-tween-func),opacity var(--panel-tween-duration) var(--panel-tween-func)}}.soso-panel .soso-group.soso-expanded>.soso-container{height:auto;opacity:1}}.soso-panel-container>.soso-panel{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.soso-panel .soso-row .soso-control{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center;min-height:var(--row-height);gap:var(--panel-space)}.soso-panel button,.soso-panel input,.soso-panel select,.soso-panel textarea{font-size:inherit;font-family:inherit;width:100%;box-sizing:border-box;border:1px solid transparent;padding:0 var(--panel-space);border-radius:var(--panel-radius);background:var(--panel-border);color:var(--panel-fg)}.soso-panel button,.soso-panel select,.soso-panel input[type=text],.soso-panel input[type=range]{min-height:var(--row-height)}.soso-panel input[type=color]{height:var(--row-height)}.soso-panel button,.soso-panel select,.soso-panel input[type=checkbox],.soso-panel input[type=range],.soso-panel input[type=color]{cursor:pointer}.soso-panel input[type=text],.soso-panel textarea{cursor:text}.soso-panel button:focus-visible,.soso-panel select:focus-visible,.soso-panel input:focus-visible,.soso-panel textarea:focus-visible{outline:2px solid var(--panel-focus);outline-offset:0px}.soso-panel button:focus:not(:focus-visible),.soso-panel select:focus:not(:focus-visible),.soso-panel input:focus:not(:focus-visible),.soso-panel textarea:focus:not(:focus-visible){outline:none}.soso-panel button:hover:not(:active):not(.soso-selected),.soso-panel input:hover,.soso-panel select:hover,.soso-panel textarea:hover{background:var(--panel-hover)}.soso-panel button:active,.soso-panel button.soso-selected{background:var(--panel-fg);color:var(--panel-bg);border-radius:var(--panel-radius)}.soso-panel input::selection,.soso-panel textarea::selection{background:var(--panel-selection-bg);color:var(--panel-selection-fg)}.soso-panel textarea{resize:vertical;min-height:calc(var(--row-height) * 2 + var(--panel-space));line-height:var(--line-height-normal);color:var(--value-string);font-family:var(--font-value)}.soso-panel .soso-buttons{display:flex;flex-direction:row;flex:1;gap:var(--panel-space)}.soso-panel .soso-pad2{position:absolute;align-self:flex-start;margin-top:calc(var(--row-height) + var(--panel-space));width:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));height:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));background:var(--panel-bg);z-index:1001}.soso-panel .soso-pad2 .soso-border,.soso-panel .soso-pad2 .soso-grid{stroke:var(--panel-fg);stroke-opacity:.25}.soso-panel .soso-pad2 .soso-label{fill:var(--panel-fg);opacity:.5}.soso-panel .soso-pad2 .soso-indicator{fill:var(--panel-fg)}.soso-panel button.soso-translate{font-weight:bolder}.soso-panel button.soso-translate.soso-selected{cursor:grabbing}.soso-panel input[type=text]{color:var(--value-string);font-family:var(--font-value)}.soso-panel input[type=text].soso-number-input{color:var(--value-number)}.soso-panel input[type=number]::-webkit-inner-spin-button,.soso-panel input[type=number]::-webkit-outer-spin-button{appearance:none;margin:0}.soso-panel input[type=text].soso-fixed{width:60px}.soso-panel .soso-control>.soso-display{line-height:var(--row-height)}.soso-panel .soso-control>.soso-display.soso-monospace{font-family:var(--font-value)}.soso-panel .soso-display a{color:var(--color-link);text-decoration:underline}.soso-panel .soso-display a:hover{text-decoration:none}.soso-panel pre.soso-display{margin:0}.soso-panel input[type=checkbox]{margin:0;appearance:none;border-radius:var(--panel-radius);width:14px;height:14px;text-align:center}.soso-panel input[type=checkbox]:checked:before{content:"";display:flex;height:var(--checkbox-check-height);width:var(--checkbox-check-width);border-bottom:2px solid var(--panel-fg);border-right:2px solid var(--panel-fg);transform:rotate(45deg)}.soso-panel input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;margin:0;padding:0}.soso-panel input[type=range]::-webkit-slider-runnable-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.soso-panel input[type=range]::-moz-range-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.soso-panel input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);margin-top:-4px}.soso-panel input[type=range]::-moz-range-thumb{width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);border:none}.soso-panel input[type=color]{-webkit-appearance:none;border:1px solid var(--panel-border);padding:0;border-radius:var(--panel-radius);height:var(--row-height)}.soso-panel input[type=color]::-webkit-color-swatch-wrapper{padding:0}.soso-panel input[type=color]::-webkit-color-swatch{border:0}.soso-panel canvas.soso-graph{width:100%}';var Oe=0,Ue=o=>`node ${Oe++}`,F=o=>{let{id:t=Ue(),nodes:n=[],...e}=o,s={},r={id:t,nodes:[]},i={id:t},l=$(o);for(let p in l)typeof l[p]=="function"?i[p]=l[p]({...l,...o}):i[p]=l[p];return Object.assign(i,e),s[t]=i,n.length>0&&n.forEach(p=>{let[c,a]=F(p);Object.assign(s,c),r.nodes.push(a)}),[s,r]},se=()=>{let o=document.createElement("div");return o.classList.add("soso-panel-container"),document.body.append(o),o},ae=()=>{if(!document.querySelector("style[data-soso-panel]")){let o=document.createElement("style");o.textContent=ne,o.setAttribute("data-soso-panel","true"),document.head.appendChild(o)}};import{jsx as le}from"preact/jsx-runtime";var ie=Symbol("all"),T=class{constructor(t,n){let[e,s]=F(t);this.nodes=e,this.root=s,this.container=n.mount??se(),this.options=n,this.subscribers=new Map,this.raf=null,n.injectStyles&&ae(),this.render()}render(){let t=()=>{re(le("div",{className:`soso-panel ${this.options.classNames.join(" ")}`,children:le(A,{nodes:this.nodes,treeNode:this.root,update:this.handleUpdate.bind(this)})}),this.container)};if(!this.options.throttleRendering){t();return}this.options.throttleRendering&&!this.raf&&(this.raf=requestAnimationFrame(()=>{t(),this.raf=null}))}handleUpdate(t,{silent:n=!1,event:e=!1}={}){if(typeof t!="object"){console.warn("could not set values: invalid values object");return}for(let s in t){let r=this.nodes[s];if(!r)continue;let i=t[s];e||(this.nodes[s]={...r,...i}),"value"in i&&!n&&this.notifySubscribers(s,t[s].value)}this.render()}notifySubscribers(t,n){this.subscribers.get(t)?.forEach(e=>e(n)),this.subscribers.get(ie)?.forEach(e=>e(t,n))}subscribe(t,n){let e=typeof t=="string"?t:ie,s=typeof n=="function"?n:typeof t=="function"?t:void 0;if(s===void 0){console.warn("could not subscribe: no handler");return}return this.subscribers.has(e)||this.subscribers.set(e,[]),this.subscribers.get(e).push(s),()=>{let r=this.subscribers.get(e),i=r.indexOf(s);i>-1?r.splice(i,1):console.warn("could not unsubscribe: could not find handler")}}set(t,n){let e={};for(let s in t)e[s]={value:t[s]};this.handleUpdate(e,n)}update(t,n){this.handleUpdate(t,{...n,event:!1})}get(){let t={};for(let n in this.nodes){let s=this.nodes[n]?.value;s!==void 0&&(t[n]=s)}return t}destroy(){this.raf&&cancelAnimationFrame(this.raf),re(null,this.container),this.options.mount||this.container.remove(),this.subscribers.clear(),this.values={}}};var pt={create(o,t={}){let n=Array.isArray(o)?{type:"group",label:"controls",nodes:o}:o,e=new T(n,{throttleRendering:!0,injectStyles:!0,classNames:[],...t});return{subscribe:e.subscribe.bind(e),update:e.update.bind(e),set:e.set.bind(e),get:e.get.bind(e),destroy:e.destroy.bind(e)}}};export{pt as default,d as register};

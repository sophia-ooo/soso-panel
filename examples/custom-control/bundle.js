var O,x,he,Je,U,ce,me,ve,ge,ae,te,ne,Ge,B={},be=[],Ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function F(e,t){for(var a in t)e[a]=t[a];return e}function oe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ze(e,t,a){var n,r,o,s={};for(o in t)o=="key"?n=t[o]:o=="ref"?r=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?O.call(arguments,2):a),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return $(e,s,n,r,null)}function $(e,t,a,n,r){var o={type:e,props:t,key:a,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++he,__i:-1,__u:0};return r==null&&x.vnode!=null&&x.vnode(o),o}function T(e){return e.children}function W(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var a;t<e.__k.length;t++)if((a=e.__k[t])!=null&&a.__e!=null)return a.__e;return typeof e.type=="function"?Y(e):null}function xe(e){var t,a;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((a=e.__k[t])!=null&&a.__e!=null){e.__e=e.__c.base=a.__e;break}return xe(e)}}function _e(e){(!e.__d&&(e.__d=!0)&&U.push(e)&&!q.__r++||ce!=x.debounceRendering)&&((ce=x.debounceRendering)||me)(q)}function q(){for(var e,t,a,n,r,o,s,i=1;U.length;)U.length>i&&U.sort(ve),e=U.shift(),i=U.length,e.__d&&(a=void 0,r=(n=(t=e).__v).__e,o=[],s=[],t.__P&&((a=F({},n)).__v=n.__v+1,x.vnode&&x.vnode(a),re(t.__P,a,n,t.__n,t.__P.namespaceURI,32&n.__u?[r]:null,o,r??Y(n),!!(32&n.__u),s),a.__v=n.__v,a.__.__k[a.__i]=a,ke(o,a,s),a.__e!=r&&xe(a)));q.__r=0}function ye(e,t,a,n,r,o,s,i,p,u,c){var l,d,f,b,m,g,h=n&&n.__k||be,v=t.length;for(p=Qe(a,t,h,p,v),l=0;l<v;l++)(f=a.__k[l])!=null&&(d=f.__i==-1?B:h[f.__i]||B,f.__i=l,g=re(e,f,d,r,o,s,i,p,u,c),b=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&le(d.ref,null,f),c.push(f.ref,f.__c||b,f)),m==null&&b!=null&&(m=b),4&f.__u||d.__k===f.__k?p=we(f,p,e):typeof f.type=="function"&&g!==void 0?p=g:b&&(p=b.nextSibling),f.__u&=-7);return a.__e=m,p}function Qe(e,t,a,n,r){var o,s,i,p,u,c=a.length,l=c,d=0;for(e.__k=new Array(r),o=0;o<r;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(p=o+d,(s=e.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?$(null,s,null,null,null):J(s)?$(T,{children:s},null,null,null):s.constructor==null&&s.__b>0?$(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,i=null,(u=s.__i=et(s,a,p,l))!=-1&&(l--,(i=a[u])&&(i.__u|=2)),i==null||i.__v==null?(u==-1&&(r>c?d--:r<c&&d++),typeof s.type!="function"&&(s.__u|=4)):u!=p&&(u==p-1?d--:u==p+1?d++:(u>p?d--:d++,s.__u|=4))):e.__k[o]=null;if(l)for(o=0;o<c;o++)(i=a[o])!=null&&(2&i.__u)==0&&(i.__e==n&&(n=Y(i)),Se(i,i));return n}function we(e,t,a){var n,r;if(typeof e.type=="function"){for(n=e.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=e,t=we(n[r],t,a));return t}e.__e!=t&&(t&&e.type&&!a.contains(t)&&(t=Y(e)),a.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function et(e,t,a,n){var r,o,s=e.key,i=e.type,p=t[a];if(p===null&&e.key==null||p&&s==p.key&&i==p.type&&(2&p.__u)==0)return a;if(n>(p!=null&&(2&p.__u)==0?1:0))for(r=a-1,o=a+1;r>=0||o<t.length;){if(r>=0){if((p=t[r])&&(2&p.__u)==0&&s==p.key&&i==p.type)return r;r--}if(o<t.length){if((p=t[o])&&(2&p.__u)==0&&s==p.key&&i==p.type)return o;o++}}return-1}function de(e,t,a){t[0]=="-"?e.setProperty(t,a??""):e[t]=a==null?"":typeof a!="number"||Ke.test(t)?a:a+"px"}function V(e,t,a,n,r){var o,s;e:if(t=="style")if(typeof a=="string")e.style.cssText=a;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)a&&t in a||de(e.style,t,"");if(a)for(t in a)n&&a[t]==n[t]||de(e.style,t,a[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(ge,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=a,a?n?a.u=n.u:(a.u=ae,e.addEventListener(t,o?ne:te,o)):e.removeEventListener(t,o?ne:te,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&a==1?"":a))}}function fe(e){return function(t){if(this.l){var a=this.l[t.type+e];if(t.t==null)t.t=ae++;else if(t.t<a.u)return;return a(x.event?x.event(t):t)}}}function re(e,t,a,n,r,o,s,i,p,u){var c,l,d,f,b,m,g,h,v,k,N,j,A,z,L,M,X,E=t.type;if(t.constructor!=null)return null;128&a.__u&&(p=!!(32&a.__u),o=[i=t.__e=a.__e]),(c=x.__b)&&c(t);e:if(typeof E=="function")try{if(h=t.props,v="prototype"in E&&E.prototype.render,k=(c=E.contextType)&&n[c.__c],N=c?k?k.props.value:c.__:n,a.__c?g=(l=t.__c=a.__c).__=l.__E:(v?t.__c=l=new E(h,N):(t.__c=l=new W(h,N),l.constructor=E,l.render=nt),k&&k.sub(l),l.props=h,l.state||(l.state={}),l.context=N,l.__n=n,d=l.__d=!0,l.__h=[],l._sb=[]),v&&l.__s==null&&(l.__s=l.state),v&&E.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=F({},l.__s)),F(l.__s,E.getDerivedStateFromProps(h,l.__s))),f=l.props,b=l.state,l.__v=t,d)v&&E.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),v&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(v&&E.getDerivedStateFromProps==null&&h!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(h,N),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(h,l.__s,N)===!1||t.__v==a.__v){for(t.__v!=a.__v&&(l.props=h,l.state=l.__s,l.__d=!1),t.__e=a.__e,t.__k=a.__k,t.__k.some(function(I){I&&(I.__=t)}),j=0;j<l._sb.length;j++)l.__h.push(l._sb[j]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(h,l.__s,N),v&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,b,m)})}if(l.context=N,l.props=h,l.__P=e,l.__e=!1,A=x.__r,z=0,v){for(l.state=l.__s,l.__d=!1,A&&A(t),c=l.render(l.props,l.state,l.context),L=0;L<l._sb.length;L++)l.__h.push(l._sb[L]);l._sb=[]}else do l.__d=!1,A&&A(t),c=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++z<25);l.state=l.__s,l.getChildContext!=null&&(n=F(F({},n),l.getChildContext())),v&&!d&&l.getSnapshotBeforeUpdate!=null&&(m=l.getSnapshotBeforeUpdate(f,b)),M=c,c!=null&&c.type===T&&c.key==null&&(M=Ne(c.props.children)),i=ye(e,J(M)?M:[M],t,a,n,r,o,s,i,p,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),g&&(l.__E=l.__=null)}catch(I){if(t.__v=null,p||o!=null)if(I.then){for(t.__u|=p?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;o[o.indexOf(i)]=null,t.__e=i}else for(X=o.length;X--;)oe(o[X]);else t.__e=a.__e,t.__k=a.__k;x.__e(I,t,a)}else o==null&&t.__v==a.__v?(t.__k=a.__k,t.__e=a.__e):i=t.__e=tt(a.__e,t,a,n,r,o,s,p,u);return(c=x.diffed)&&c(t),128&t.__u?void 0:i}function ke(e,t,a){for(var n=0;n<a.length;n++)le(a[n],a[++n],a[++n]);x.__c&&x.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){x.__e(o,r.__v)}})}function Ne(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:J(e)?e.map(Ne):F({},e)}function tt(e,t,a,n,r,o,s,i,p){var u,c,l,d,f,b,m,g=a.props,h=t.props,v=t.type;if(v=="svg"?r="http://www.w3.org/2000/svg":v=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((f=o[u])&&"setAttribute"in f==!!v&&(v?f.localName==v:f.nodeType==3)){e=f,o[u]=null;break}}if(e==null){if(v==null)return document.createTextNode(h);e=document.createElementNS(r,v,h.is&&h),i&&(x.__m&&x.__m(t,o),i=!1),o=null}if(v==null)g===h||i&&e.data==h||(e.data=h);else{if(o=o&&O.call(e.childNodes),g=a.props||B,!i&&o!=null)for(g={},u=0;u<e.attributes.length;u++)g[(f=e.attributes[u]).name]=f.value;for(u in g)if(f=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=f;else if(!(u in h)){if(u=="value"&&"defaultValue"in h||u=="checked"&&"defaultChecked"in h)continue;V(e,u,null,f,r)}}for(u in h)f=h[u],u=="children"?d=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?b=f:u=="checked"?m=f:i&&typeof f!="function"||g[u]===f||V(e,u,f,g[u],r);if(c)i||l&&(c.__html==l.__html||c.__html==e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(l&&(e.innerHTML=""),ye(t.type=="template"?e.content:e,J(d)?d:[d],t,a,n,v=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,s,o?o[0]:a.__k&&Y(a,0),i,p),o!=null)for(u=o.length;u--;)oe(o[u]);i||(u="value",v=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[u]||v=="progress"&&!b||v=="option"&&b!=g[u])&&V(e,u,b,g[u],r),u="checked",m!=null&&m!=e[u]&&V(e,u,m,g[u],r))}return e}function le(e,t,a){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(r){x.__e(r,a)}}function Se(e,t,a){var n,r;if(x.unmount&&x.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||le(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){x.__e(o,t)}n.base=n.__P=null}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&Se(n[r],t,a||typeof e.type!="function");a||oe(e.__e),e.__c=e.__=e.__e=void 0}function nt(e,t,a){return this.constructor(e,a)}function ie(e,t,a){var n,r,o,s;t==document&&(t=document.documentElement),x.__&&x.__(e,t),r=(n=typeof a=="function")?null:a&&a.__k||t.__k,o=[],s=[],re(t,e=(!n&&a||t).__k=Ze(T,null,[e]),r||B,B,t.namespaceURI,!n&&a?[a]:r?null:t.firstChild?O.call(t.childNodes):null,o,!n&&a?a:r?r.__e:t.firstChild,n,s),ke(o,e,s)}O=be.slice,x={__e:function(e,t,a,n){for(var r,o,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,n||{}),s=r.__d),s)return r.__E=r}catch(i){e=i}throw e}},he=0,Je=function(e){return e!=null&&e.constructor==null},W.prototype.setState=function(e,t){var a;a=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},a),this.props)),e&&F(a,e),e!=null&&this.__v&&(t&&this._sb.push(t),_e(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_e(this))},W.prototype.render=T,U=[],me=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ve=function(e,t){return e.__v.__b-t.__v.__b},q.__r=0,ge=/(PointerCapture)$|Capture$/i,ae=0,te=fe(!1),ne=fe(!0),Ge=0;var at=0,It=Array.isArray;function _(e,t,a,n,r,o){t||(t={});var s,i,p=t;if("ref"in p)for(i in p={},t)i=="ref"?s=t[i]:p[i]=t[i];var u={type:e,props:p,key:a,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--at,__i:-1,__u:0,__source:r,__self:o};if(typeof e=="function"&&(s=e.defaultProps))for(i in s)p[i]===void 0&&(p[i]=s[i]);return x.vnode&&x.vnode(u),u}var R,y,se,Ce,K=0,Fe=[],w=x,je=w.__b,Ee=w.__r,Te=w.diffed,Ae=w.__c,Pe=w.unmount,He=w.__;function pe(e,t){w.__h&&w.__h(y,e,K||t),K=0;var a=y.__H||(y.__H={__:[],__h:[]});return e>=a.__.length&&a.__.push({}),a.__[e]}function C(e){return K=1,ot(De,e)}function ot(e,t,a){var n=pe(R++,2);if(n.t=e,!n.__c&&(n.__=[a?a(t):De(void 0,t),function(i){var p=n.__N?n.__N[0]:n.__[0],u=n.t(p,i);p!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=y,!y.__f)){var r=function(i,p,u){if(!n.__c.__H)return!0;var c=n.__c.__H.__.filter(function(d){return!!d.__c});if(c.every(function(d){return!d.__N}))return!o||o.call(this,i,p,u);var l=n.__c.props!==i;return c.forEach(function(d){if(d.__N){var f=d.__[0];d.__=d.__N,d.__N=void 0,f!==d.__[0]&&(l=!0)}}),o&&o.call(this,i,p,u)||l};y.__f=!0;var o=y.shouldComponentUpdate,s=y.componentWillUpdate;y.componentWillUpdate=function(i,p,u){if(this.__e){var c=o;o=void 0,r(i,p,u),o=c}s&&s.call(this,i,p,u)},y.shouldComponentUpdate=r}return n.__N||n.__}function P(e,t){var a=pe(R++,3);!w.__s&&Le(a.__H,t)&&(a.__=e,a.u=t,y.__H.__h.push(a))}function ze(e){return K=5,rt(function(){return{current:e}},[])}function rt(e,t){var a=pe(R++,7);return Le(a.__H,t)&&(a.__=e(),a.__H=t,a.__h=e),a.__}function lt(){for(var e;e=Fe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(G),e.__H.__h.forEach(ue),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){y=null,je&&je(e)},w.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),He&&He(e,t)},w.__r=function(e){Ee&&Ee(e),R=0;var t=(y=e.__c).__H;t&&(se===y?(t.__h=[],y.__h=[],t.__.forEach(function(a){a.__N&&(a.__=a.__N),a.u=a.__N=void 0})):(t.__h.forEach(G),t.__h.forEach(ue),t.__h=[],R=0)),se=y},w.diffed=function(e){Te&&Te(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Fe.push(t)!==1&&Ce===w.requestAnimationFrame||((Ce=w.requestAnimationFrame)||it)(lt)),t.__H.__.forEach(function(a){a.u&&(a.__H=a.u),a.u=void 0})),se=y=null},w.__c=function(e,t){t.some(function(a){try{a.__h.forEach(G),a.__h=a.__h.filter(function(n){return!n.__||ue(n)})}catch(n){t.some(function(r){r.__h&&(r.__h=[])}),t=[],w.__e(n,a.__v)}}),Ae&&Ae(e,t)},w.unmount=function(e){Pe&&Pe(e);var t,a=e.__c;a&&a.__H&&(a.__H.__.forEach(function(n){try{G(n)}catch(r){t=r}}),a.__H=void 0,t&&w.__e(t,a.__v))};var Me=typeof requestAnimationFrame=="function";function it(e){var t,a=function(){clearTimeout(n),Me&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(a,35);Me&&(t=requestAnimationFrame(a))}function G(e){var t=y,a=e.__c;typeof a=="function"&&(e.__c=void 0,a()),y=t}function ue(e){var t=y;e.__c=e.__(),y=t}function Le(e,t){return!e||e.length!==t.length||t.some(function(a,n){return a!==e[n]})}function De(e,t){return typeof t=="function"?t(e):t}var Q={},st={layout:"row",visible:!0},S=(e,t,a={})=>{Q[e]={...st,...a,component:t}},Be=e=>e in Q?!0:(console.warn(`control of type "${e}" is requested but not registered`),!1),ut=e=>{if(!Be(e.type))return;let{component:t,...a}=Q[e.type];return a},pt=e=>{if(!Be(e.type))return;let{component:t,...a}=Q[e.type];return t},ct=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id];return _("button",{type:"button",onClick:()=>a({[n.id]:{value:!0}},{event:!0}),children:n.text??n.id})};S("button",ct,{label:null});var Ie=e=>e.trim()==="",Ue=e=>isFinite(e),_t=(e,t)=>String(e)!==t,dt=(e,t,a)=>e>=t&&e<=a,ft=(e,t,a)=>Math.min(Math.max(e,t),a),Z=({value:e,min:t=-1/0,max:a=1/0,commit:n})=>{let[r,o]=C(String(e)),[s,i]=C(e);P(()=>{o(String(e)),i(e)},[e]);function p(c){let l=String(c);if(o(l),Ie(l))return;let d=Number(l);!Ue(d)||!dt(d,t,a)||_t(d,l)||(i(d),n(d))}function u(){if(Ie(r)||!Ue(Number(r))){o(String(s));return}let c=Number(r),l=ft(c,t,a);o(String(l)),i(l),n(l)}return{value:e,text:r,setValue:p,handleBlur:u}},ee=e=>Array.isArray(e)&&e.every(t=>t!=null&&typeof t=="object"&&!Array.isArray(t)&&"label"in t&&"value"in t)?e:Array.isArray(e)?e.map(t=>({label:String(t),value:t})):e&&typeof e=="object"?Object.entries(e).map(([t,a])=>({label:t,value:a})):[],ht=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],r=ee(n.options).map(({label:o,value:s},i)=>{let p=n.value===s?"selected":"";return _("button",{onClick:()=>a({[n.id]:{value:s}}),className:`${p}`,type:"button",children:o},o)});return _("div",{className:"buttons",children:r})};S("buttons",ht,{value:e=>ee(e.options)[0]?.value});var mt=e=>"#ffffff",vt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],[r,o]=C(n.value),[s,i]=C(n.value);P(()=>{o(n.value)},[n.value]);let p=l=>l.startsWith("#")&&l.length===7&&CSS.supports("color",l),u=l=>{let d=l.currentTarget.value,f=p(d)?d:s;a({[n.id]:{value:f}}),o(f)},c=l=>{let d=l.currentTarget.value;p(d)&&(a({[n.id]:{value:d}}),i(d))};return _(T,{children:[_("input",{type:"color",value:r,onInput:c,className:"color-picker"}),_("input",{type:"text",className:"fixed",size:"7",value:r,onInput:c,onChange:u})]})};S("color",vt,{value:mt});var gt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id];switch(n.format){case"monospace":return _("span",{className:"display monospace",children:n.value});case"block":return _("pre",{className:"display monospace",children:n.value});case"html":return _("span",{className:"display",dangerouslySetInnerHTML:{__html:n.value??""}});default:return _("span",{className:"display",children:n.value})}};S("display",gt,{value:"",format:"text"});var bt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],r=ze(null),[o,s]=C(Array(n.samples).fill(0)),[i,p]=C({min:null,max:null});return P(()=>{s(u=>[...u,n.value].slice(-n.samples)),p(u=>({min:u.min===null?n.value:Math.min(u.min,n.value),max:u.max===null?n.value:Math.max(u.max,n.value)}))},[n]),P(()=>{let u=r.current;if(!u)return;let c=u.getContext("2d"),l=u.getBoundingClientRect(),d=window.devicePixelRatio||1,f=l.width,b=n.height;u.width=f*d,u.height=b*d,c.scale(d,d),u.style.width=f+"px",u.style.height=b+"px",c.clearRect(0,0,f,b);let m=u.closest(".soso-panel"),g=getComputedStyle(m).getPropertyValue("--panel-fg").trim()||"#aaa",h=n.min??i.min??0,v=n.max??i.max??1,k=v-h||1,N=1/(n.samples-1)*f;c.fillStyle=g,c.globalAlpha=.5,c.beginPath(),c.moveTo(0,b),o.forEach((j,A)=>{let z=(j-h)/k*b,L=A*N,M=b-z;c.lineTo(L,M)}),c.lineTo(f,b),c.fill(),c.globalAlpha=1,c.font="10px ui-monospace, monospace",c.textBaseline="top",c.textAlign="left",c.fillText(v,3,0),c.textBaseline="bottom",c.fillText(h,3,b)},[o,i,n]),_("canvas",{className:"graph",ref:r,height:n.height})};S("graph",bt,{height:60,samples:60});var Re=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id];if(!n.visible)return null;let r=pt(n);if(!r)return null;let o=_(r,{nodes:e,treeNode:t,update:a});if(n.layout==="block")return o;let s=!(n.label===""||n.label===null);return _("div",{className:"row",role:"group","aria-label":n.label??n.id,children:[s&&_("span",{className:"label",children:n.label??n.id}),_("div",{className:"control",children:o})]})},xt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],r=t.nodes.map((p,u)=>_(Re,{nodes:e,treeNode:p,update:a},p.id)),o=n.expanded?"expanded":"collapsed",s=n.showLabel?"show-label":"hide-label",i=!(n.label===""||n.label===null);return _("div",{className:`group ${o} ${s}`,children:[i&&_("span",{className:"label",onClick:()=>{n.expandable&&a({[n.id]:{expanded:!n.expanded}})},children:[n.expandable&&_("span",{className:"icon",children:"\u2303"}),n.label??n.id]}),_("div",{className:"container",children:r})]})};S("group",xt,{layout:"block",expandable:!0,expanded:!0});var yt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],{text:r,setValue:o,handleBlur:s}=Z({value:n.value,min:n.min,max:n.max,commit:i=>a({[n.id]:{value:i}})});return _("input",{className:"number-input",type:"text",value:r,onInput:i=>o(i.currentTarget.value),onChange:s})};S("number",yt,{value:()=>0});var Ye=(e,t)=>{let a=1/t;return Math.round(e*a)/a},wt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],{x:r,y:o}=n.value,[s,i]=C(!1),[p,u]=C(null),[c,l]=C({height:176,width:176,space:6,radius:2});P(()=>{let m=document.querySelector(".soso-panel");if(!m)return;let g=getComputedStyle(m),h=g.getPropertyValue("--panel-width"),v=g.getPropertyValue("--label-width"),k=g.getPropertyValue("--panel-radius"),N=g.getPropertyValue("--panel-space"),j=parseFloat(h)-parseFloat(v)-2*parseFloat(N),A=parseFloat(k),z=parseFloat(N);l({width:j,height:j,radius:A,space:z})},[]);let d=Z({value:n.value.x,min:n.minX,max:n.maxX,commit:m=>a({[n.id]:{value:{...n.value,x:m}}})}),f=Z({value:n.value.y,min:n.minY,max:n.maxY,commit:m=>a({[n.id]:{value:{...n.value,y:m}}})});P(()=>{if(!s||!p)return;let m=document.body.style.cursor;document.body.style.cursor="grabbing";let g=k=>{let N=k.clientX??k.touches?.[0]?.clientX,j=k.clientY??k.touches?.[0]?.clientY;if(N===void 0||j===void 0)return;let A=N-p.pointerX,z=j-p.pointerY,L=p.valueX+A*n.scale,M=p.valueY+z*n.scale,X=Math.max(n.minX,Math.min(n.maxX,L)),E=Math.max(n.minY,Math.min(n.maxY,M)),I=Ye(X,n.step),Oe=Ye(E,n.step);a({[n.id]:{value:{x:I,y:Oe}}})},h=()=>{i(!1),u(null)},v=k=>(k.preventDefault(),!1);return document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",h),()=>{document.body.style.cursor=m,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",h)}},[s,p,n]);let b=(m,g=null)=>{let h=m.clientX??m.touches?.[0]?.clientX,v=m.clientY??m.touches?.[0]?.clientY;i(!0),u({pointerX:h,pointerY:v,valueX:g?.x??n.value.x,valueY:g?.y??n.value.y})};return _(T,{children:[_("button",{onMouseDown:m=>{m.preventDefault(),b(m)},onTouchStart:m=>{m.preventDefault(),b(m)},className:`translate ${s?"selected":""}`,type:"button",style:{touchAction:"none",userSelect:"none"},children:"\u2316"}),_("input",{className:"number-input fixed",type:"text",size:"7",value:d.text,onInput:m=>d.setValue(m.currentTarget.value),onChange:d.handleBlur}),_("input",{className:"number-input fixed",type:"text",size:"7",value:f.text,onInput:m=>f.setValue(m.currentTarget.value),onChange:f.handleBlur}),s&&_("div",{className:"pad2",children:_("svg",{width:c.width,height:c.height,style:{position:"absolute",top:0,left:0,borderRadius:c.radius},children:[_("rect",{width:c.width,height:c.height,fill:"transparent",className:"border",rx:c.radius}),_("line",{x1:c.width/2,y1:0,x2:c.width/2,y2:c.height,className:"grid"}),_("line",{x1:0,y1:c.height/2,x2:c.width,y2:c.height/2,className:"grid"}),_("text",{x:c.space,y:c.space,className:"label","dominant-baseline":"hanging","font-size":"10",children:[n.minX,",",n.minY]}),_("text",{x:c.width-c.space,y:c.space,"dominant-baseline":"hanging",className:"label","font-size":"10","text-anchor":"end",children:[n.maxX,",",n.minY]}),_("text",{x:c.space,y:c.height-c.space,className:"label","font-size":"10",children:[n.minX,",",n.maxY]}),_("text",{x:c.width-c.space,y:c.height-c.space,className:"label","font-size":"10","text-anchor":"end",children:[n.maxX,",",n.maxY]}),_("circle",{cx:(r-n.minX)/(n.maxX-n.minX)*c.width,cy:(o-n.minY)/(n.maxY-n.minY)*c.height,r:6,className:"indicator"})]})})]})};S("pad2",wt,{value:e=>({x:e.minX+(e.maxX-e.minX)*.5,y:e.minY+(e.maxY-e.minY)*.5}),scale:.01,step:.01,minX:-1,maxX:1,minY:-1,maxY:1});var kt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],{text:r,setValue:o,handleBlur:s}=Z({value:n.value,min:n.min,max:n.max,commit:i=>a({[n.id]:{value:i}})});return _(T,{children:[_("input",{type:"range",value:r,min:n.min,max:n.max,step:n.step??1,onInput:i=>o(i.currentTarget.value)}),_("input",{type:"text",size:"7",className:"number-input fixed",value:r,onInput:i=>o(i.currentTarget.value),onChange:s})]})};S("range",kt,{value:e=>e.min??0});var Nt=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],r=ee(n.options),o=p=>{let u=Number(p.currentTarget.value),c=r[u].value;a({[n.id]:{value:c}})},s=r.map(({label:p},u)=>_("option",{value:u,children:p},p)),i=r.findIndex(({value:p})=>p===n.value);return _("select",{value:i<0?"":i,onChange:o,children:s})};S("select",Nt,{value:e=>ee(e.options)[0]?.value});var St=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],r=o=>{a({[n.id]:{value:o.currentTarget.value}})};return n.multiline?_("textarea",{value:n.value,onInput:r,rows:n.rows}):_("input",{type:"text",value:n.value,onInput:r})};S("text",St,{value:"",multiline:!1,rows:4});var Ct=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id];return _("input",{type:"checkbox",checked:n.value,onInput:r=>a({[n.id]:{value:r.currentTarget.checked}})})};S("toggle",Ct,{value:e=>!1});var jt='.soso-panel-container{position:fixed;top:0;right:0}.soso-panel{--panel-bg: hsl(230 7% 10%);--panel-fg: hsl(230 10% 75%);--panel-border: hsl(230 9% 18%);--panel-hover: hsl(230 9% 26%);--panel-pressed: hsl(230 7% 16%);--panel-low-emphasis: hsl(230 4% 55%);--panel-focus: var(--panel-fg);--panel-selection-fg: var(--panel-bg);--panel-selection-bg: var(--panel-fg);--value-number: hsl(220 80% 65%);--value-string: hsl(139 45% 56%);--panel-space: 4px;--panel-radius: 2px;--panel-width: 256px;--label-width: 80px;--row-height: 20px;--font-ui: system-ui, -apple-system, sans-serif;--font-value: ui-monospace, monospace;--font-size-normal: 11px;--line-height-normal: 1.4;--color-link: var(--value-number);--panel-tween-func: cubic-bezier(.25, .8, .5, 1);--panel-tween-duration: .2s;--checkbox-check-width: 3px;--checkbox-check-height: 9px;width:var(--panel-width);color:var(--panel-fg);font-family:var(--font-ui);font-size:var(--font-size-normal);line-height:var(--line-height-normal);box-sizing:border-box;font-variant-numeric:tabular-nums}.soso-panel .row{display:flex;flex-direction:row;gap:var(--panel-space);padding:var(--panel-space) var(--panel-space)}.soso-panel .row+.row{padding-top:calc(var(--panel-space) * .5)}.soso-panel .row:has(+.group.hide-label),.soso-panel .row:has(+.row){padding-bottom:calc(var(--panel-space) * .5)}.soso-panel .group.hide-label:not(:only-child)>.container>.row:first-child{padding-top:calc(var(--panel-space) * .5)}.soso-panel .container .container{border-bottom:1px solid var(--panel-border)}.soso-panel .row .label{display:flex;align-self:flex-start;align-items:center;line-height:1.2;min-height:20px;min-width:0;user-select:none;color:var(--panel-low-emphasis);flex:0 0 var(--label-width)}.soso-panel .group{display:flex;flex-direction:column;background:var(--panel-bg);border-radius:var(--panel-radius)}.soso-panel-container>.soso-panel>.group>.label{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.soso-panel .group>.label{display:flex;align-items:center;user-select:none;background:var(--panel-border);border-radius:var(--panel-radius);height:var(--row-height);padding-left:var(--panel-space);gap:var(--panel-space)}.soso-panel .group>.label:has(>.icon){cursor:pointer}.soso-panel .group>.label>.icon{font-weight:700;font-size:10px;cursor:pointer}@media (prefers-reduced-motion: no-preference){.soso-panel .group>.label>.icon{transition:transform var(--panel-tween-duration) var(--panel-tween-func)}}.soso-panel .group.expanded>.label>.icon{transform:rotate(180deg)}.soso-panel .group>.container{flex-direction:column;overflow:hidden;display:none}.soso-panel .group.expanded>.container{display:flex}@supports (interpolate-size: allow-keywords){.soso-panel .group>.container{display:flex;interpolate-size:allow-keywords;height:0;opacity:0}@media (prefers-reduced-motion: no-preference){.soso-panel .group>.container{transition:height var(--panel-tween-duration) var(--panel-tween-func),padding var(--panel-tween-duration) var(--panel-tween-func),opacity var(--panel-tween-duration) var(--panel-tween-func)}}.soso-panel .group.expanded>.container{height:auto;opacity:1}}.soso-panel-container>.soso-panel{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.soso-panel .row .control{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center;min-height:var(--row-height);gap:var(--panel-space)}.soso-panel button,.soso-panel input,.soso-panel select,.soso-panel textarea{font-size:inherit;font-family:inherit;width:100%;box-sizing:border-box;border:1px solid transparent;padding:0 var(--panel-space);border-radius:var(--panel-radius);background:var(--panel-border);color:var(--panel-fg)}.soso-panel button,.soso-panel select,.soso-panel input[type=text],.soso-panel input[type=range]{min-height:var(--row-height)}.soso-panel input[type=color]{height:var(--row-height)}.soso-panel button,.soso-panel select,.soso-panel input[type=checkbox],.soso-panel input[type=range],.soso-panel input[type=color]{cursor:pointer}.soso-panel input[type=text],.soso-panel textarea{cursor:text}.soso-panel button:focus-visible,.soso-panel select:focus-visible,.soso-panel input:focus-visible,.soso-panel textarea:focus-visible{outline:2px solid var(--panel-focus);outline-offset:0px}.soso-panel button:focus:not(:focus-visible),.soso-panel select:focus:not(:focus-visible),.soso-panel input:focus:not(:focus-visible),.soso-panel textarea:focus:not(:focus-visible){outline:none}.soso-panel button:hover:not(:active):not(.selected),.soso-panel input:hover,.soso-panel select:hover,.soso-panel textarea:hover{background:var(--panel-hover)}.soso-panel button:active,.soso-panel button.selected{background:var(--panel-fg);color:var(--panel-bg);border-radius:var(--panel-radius)}.soso-panel input::selection,.soso-panel textarea::selection{background:var(--panel-selection-bg);color:var(--panel-selection-fg)}.soso-panel textarea{resize:vertical;min-height:calc(var(--row-height) * 2 + var(--panel-space));line-height:var(--line-height-normal);color:var(--value-string);font-family:var(--font-value)}.soso-panel .buttons{display:flex;flex-direction:row;flex:1;gap:var(--panel-space)}.soso-panel .pad2{position:absolute;align-self:flex-start;margin-top:calc(var(--row-height) + var(--panel-space));width:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));height:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));background:var(--panel-bg);z-index:1001}.soso-panel .pad2 .border,.soso-panel .pad2 .grid{stroke:var(--panel-fg);stroke-opacity:.25}.soso-panel .pad2 .label{fill:var(--panel-fg);opacity:.5}.soso-panel .pad2 .indicator{fill:var(--panel-fg)}.soso-panel button.translate{font-weight:bolder}.soso-panel button.translate.selected{cursor:grabbing}.soso-panel input[type=text]{color:var(--value-string);font-family:var(--font-value)}.soso-panel input[type=text].number-input{color:var(--value-number)}.soso-panel input[type=number]::-webkit-inner-spin-button,.soso-panel input[type=number]::-webkit-outer-spin-button{appearance:none;margin:0}.soso-panel input[type=text].fixed{width:60px}.soso-panel .control>.display{line-height:var(--row-height)}.soso-panel .control>.display.monospace{font-family:var(--font-value)}.soso-panel .display a{color:var(--color-link);text-decoration:underline}.soso-panel .display a:hover{text-decoration:none}.soso-panel pre.display{margin:0}.soso-panel input[type=checkbox]{margin:0;appearance:none;border-radius:var(--panel-radius);width:14px;height:14px;text-align:center}.soso-panel input[type=checkbox]:checked:before{content:"";display:flex;height:var(--checkbox-check-height);width:var(--checkbox-check-width);border-bottom:2px solid var(--panel-fg);border-right:2px solid var(--panel-fg);transform:rotate(45deg)}.soso-panel input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;margin:0;padding:0}.soso-panel input[type=range]::-webkit-slider-runnable-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.soso-panel input[type=range]::-moz-range-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.soso-panel input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);margin-top:-4px}.soso-panel input[type=range]::-moz-range-thumb{width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);border:none}.soso-panel input[type=color]{-webkit-appearance:none;border:1px solid var(--panel-border);padding:0;border-radius:var(--panel-radius);height:var(--row-height)}.soso-panel input[type=color]::-webkit-color-swatch-wrapper{padding:0}.soso-panel input[type=color]::-webkit-color-swatch{border:0}.soso-panel canvas.graph{width:100%}',Et=0,Tt=e=>`node ${Et++}`,Ve=e=>{let{id:t=Tt(),nodes:a=[],...n}=e,r={},o={id:t,nodes:[]},s={id:t},i=ut(e);for(let p in i)typeof i[p]=="function"?s[p]=i[p]({...i,...e}):s[p]=i[p];return Object.assign(s,n),r[t]=s,a.length>0&&a.forEach(p=>{let[u,c]=Ve(p);Object.assign(r,u),o.nodes.push(c)}),[r,o]},At=()=>{let e=document.createElement("div");return e.classList.add("soso-panel-container"),document.body.append(e),e},Pt=()=>{if(!document.querySelector("style[data-soso-panel]")){let e=document.createElement("style");e.textContent=jt,e.setAttribute("data-soso-panel","true"),document.head.appendChild(e)}},Xe=Symbol("all"),Ht=class{constructor(e,t){let[a,n]=Ve(e);this.nodes=a,this.root=n,this.container=t.mount??At(),this.options=t,this.subscribers=new Map,this.raf=null,t.injectStyles&&Pt(),this.render()}render(){let e=()=>{ie(_("div",{className:`soso-panel ${this.options.classNames.join(" ")}`,children:_(Re,{nodes:this.nodes,treeNode:this.root,update:this.handleUpdate.bind(this)})}),this.container)};if(!this.options.throttleRendering){e();return}this.options.throttleRendering&&!this.raf&&(this.raf=requestAnimationFrame(()=>{e(),this.raf=null}))}handleUpdate(e,{silent:t=!1,event:a=!1}={}){if(typeof e!="object"){console.warn("could not set values: invalid values object");return}for(let n in e){let r=this.nodes[n];if(!r)continue;let o=e[n];a||(this.nodes[n]={...r,...o}),"value"in o&&!t&&this.notifySubscribers(n,e[n].value)}this.render()}notifySubscribers(e,t){this.subscribers.get(e)?.forEach(a=>a(t)),this.subscribers.get(Xe)?.forEach(a=>a(e,t))}subscribe(e,t){let a=typeof e=="string"?e:Xe,n=typeof t=="function"?t:typeof e=="function"?e:void 0;if(n===void 0){console.warn("could not subscribe: no handler");return}return this.subscribers.has(a)||this.subscribers.set(a,[]),this.subscribers.get(a).push(n),()=>{let r=this.subscribers.get(a),o=r.indexOf(n);o>-1?r.splice(o,1):console.warn("could not unsubscribe: could not find handler")}}set(e,t){let a={};for(let n in e)a[n]={value:e[n]};this.handleUpdate(a,t)}update(e,t){this.handleUpdate(e,{...t,event:!1})}get(){let e={};for(let t in this.nodes){let a=this.nodes[t]?.value;a!==void 0&&(e[t]=a)}return e}destroy(){this.raf&&cancelAnimationFrame(this.raf),ie(null,this.container),this.options.mount||this.container.remove(),this.subscribers.clear(),this.values={}}},$e={create(e,t={}){let a=Array.isArray(e)?{type:"group",label:"controls",nodes:e}:e,n=new Ht(a,{throttleRendering:!0,injectStyles:!0,classNames:[],...t});return{subscribe:n.subscribe.bind(n),update:n.update.bind(n),set:n.set.bind(n),get:n.get.bind(n),destroy:n.destroy.bind(n)}}};var Mt=[129414,129326,128169,128584,129445,129441,129448,129453,129742,129743,129727,128009,129440,129484,129503,129535,129712,129714,129715,129713,129767,129753,128511,127755,128760,129668,128371,129702,129703,129687,129688,129689,129697,129698,129699,129667,129680,129768,129760,129396,129765,129744],Ft=({nodes:e,treeNode:t,update:a})=>{let n=e[t.id],r=Mt.map(o=>{let s=n.value===o,i=String.fromCodePoint(o);return _("button",{type:"button",onClick:()=>a({[n.id]:{value:o}}),className:s?"selected":"",children:i},i)});return _("div",{className:"emoji-palette",children:r})};S("emoji-palette",Ft,{value:()=>129414,label:null});var zt=$e.create({type:"group",id:"emoji picker",nodes:[{id:"emoji",type:"emoji-palette"}]}),H=document.createElement("canvas"),D=H.getContext("2d");document.getElementById("canvas-container").append(H);var We=()=>{H.width=window.innerWidth,H.height=window.innerHeight},qe=(e=[])=>{D.clearRect(0,0,H.width,H.height);let{emoji:t}=zt.get(),a=String.fromCodePoint(t),n=[];for(let o=0;o<5;o++)n.push({x:Math.random()*H.width,y:Math.random()*H.height-H.height,velocity:Math.random()*5+5,emoji:a});D.font="48px serif",D.textAlign="center",D.textBaseline="middle";let r=[...e,...n].map(o=>({...o,y:o.y+o.velocity})).filter(o=>o.y>=H.height+48?!1:(D.save(),D.translate(o.x,o.y),D.fillText(o.emoji,0,0),D.restore(),!0));requestAnimationFrame(()=>qe(r))};window.addEventListener("resize",We);We();qe();

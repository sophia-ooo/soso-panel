var J={},We={layout:"row",visible:!0},C=(e,o,n={})=>{J[e]={...We,...n,component:o}},Te=e=>e in J?!0:(console.warn(`control of type "${e}" is requested but not registered`),!1),qe=e=>{if(!Te(e.type))return;let{component:o,...n}=J[e.type];return n},Oe=e=>{if(!Te(e.type))return;let{component:o,...n}=J[e.type];return o},K,y,Pe,Ge,z,ce,Ae,He,Me,le,ne,ae,Je,D={},Xe=[],Ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Q=Array.isArray;function A(e,o){for(var n in o)e[n]=o[n];return e}function se(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Qe(e,o,n){var t,r,a,s={};for(a in o)a=="key"?t=o[a]:a=="ref"?r=o[a]:s[a]=o[a];if(arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return $(e,s,t,r,null)}function $(e,o,n,t,r){var a={type:e,props:o,key:n,ref:t,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Pe,__i:-1,__u:0};return r==null&&y.vnode!=null&&y.vnode(a),a}function L(e){return e.children}function V(e,o){this.props=e,this.context=o}function F(e,o){if(o==null)return e.__?F(e.__,e.__i+1):null;for(var n;o<e.__k.length;o++)if((n=e.__k[o])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?F(e):null}function Ye(e){var o,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,o=0;o<e.__k.length;o++)if((n=e.__k[o])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ye(e)}}function _e(e){(!e.__d&&(e.__d=!0)&&z.push(e)&&!q.__r++||ce!=y.debounceRendering)&&((ce=y.debounceRendering)||Ae)(q)}function q(){for(var e,o,n,t,r,a,s,i=1;z.length;)z.length>i&&z.sort(He),e=z.shift(),i=z.length,e.__d&&(n=void 0,r=(t=(o=e).__v).__e,a=[],s=[],o.__P&&((n=A({},t)).__v=t.__v+1,y.vnode&&y.vnode(n),ie(o.__P,n,t,o.__n,o.__P.namespaceURI,32&t.__u?[r]:null,a,r??F(t),!!(32&t.__u),s),n.__v=t.__v,n.__.__k[n.__i]=n,Fe(a,n,s),n.__e!=r&&Ye(n)));q.__r=0}function ze(e,o,n,t,r,a,s,i,p,u,c){var l,_,d,b,v,g,f=t&&t.__k||Xe,m=o.length;for(p=Ze(n,o,f,p,m),l=0;l<m;l++)(d=n.__k[l])!=null&&(_=d.__i==-1?D:f[d.__i]||D,d.__i=l,g=ie(e,d,_,r,a,s,i,p,u,c),b=d.__e,d.ref&&_.ref!=d.ref&&(_.ref&&ue(_.ref,null,d),c.push(d.ref,d.__c||b,d)),v==null&&b!=null&&(v=b),4&d.__u||_.__k===d.__k?p=Le(d,p,e):typeof d.type=="function"&&g!==void 0?p=g:b&&(p=b.nextSibling),d.__u&=-7);return n.__e=v,p}function Ze(e,o,n,t,r){var a,s,i,p,u,c=n.length,l=c,_=0;for(e.__k=new Array(r),a=0;a<r;a++)(s=o[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(p=a+_,(s=e.__k[a]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?$(null,s,null,null,null):Q(s)?$(L,{children:s},null,null,null):s.constructor==null&&s.__b>0?$(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,i=null,(u=s.__i=eo(s,n,p,l))!=-1&&(l--,(i=n[u])&&(i.__u|=2)),i==null||i.__v==null?(u==-1&&(r>c?_--:r<c&&_++),typeof s.type!="function"&&(s.__u|=4)):u!=p&&(u==p-1?_--:u==p+1?_++:(u>p?_--:_++,s.__u|=4))):e.__k[a]=null;if(l)for(a=0;a<c;a++)(i=n[a])!=null&&(2&i.__u)==0&&(i.__e==t&&(t=F(i)),Ie(i,i));return t}function Le(e,o,n){var t,r;if(typeof e.type=="function"){for(t=e.__k,r=0;t&&r<t.length;r++)t[r]&&(t[r].__=e,o=Le(t[r],o,n));return o}e.__e!=o&&(o&&e.type&&!n.contains(o)&&(o=F(e)),n.insertBefore(e.__e,o||null),o=e.__e);do o=o&&o.nextSibling;while(o!=null&&o.nodeType==8);return o}function eo(e,o,n,t){var r,a,s=e.key,i=e.type,p=o[n];if(p===null&&e.key==null||p&&s==p.key&&i==p.type&&(2&p.__u)==0)return n;if(t>(p!=null&&(2&p.__u)==0?1:0))for(r=n-1,a=n+1;r>=0||a<o.length;){if(r>=0){if((p=o[r])&&(2&p.__u)==0&&s==p.key&&i==p.type)return r;r--}if(a<o.length){if((p=o[a])&&(2&p.__u)==0&&s==p.key&&i==p.type)return a;a++}}return-1}function de(e,o,n){o[0]=="-"?e.setProperty(o,n??""):e[o]=n==null?"":typeof n!="number"||Ke.test(o)?n:n+"px"}function R(e,o,n,t,r){var a,s;e:if(o=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof t=="string"&&(e.style.cssText=t=""),t)for(o in t)n&&o in n||de(e.style,o,"");if(n)for(o in n)t&&n[o]==t[o]||de(e.style,o,n[o])}else if(o[0]=="o"&&o[1]=="n")a=o!=(o=o.replace(Me,"$1")),s=o.toLowerCase(),o=s in e||o=="onFocusOut"||o=="onFocusIn"?s.slice(2):o.slice(2),e.l||(e.l={}),e.l[o+a]=n,n?t?n.u=t.u:(n.u=le,e.addEventListener(o,a?ae:ne,a)):e.removeEventListener(o,a?ae:ne,a);else{if(r=="http://www.w3.org/2000/svg")o=o.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(o!="width"&&o!="height"&&o!="href"&&o!="list"&&o!="form"&&o!="tabIndex"&&o!="download"&&o!="rowSpan"&&o!="colSpan"&&o!="role"&&o!="popover"&&o in e)try{e[o]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&o[4]!="-"?e.removeAttribute(o):e.setAttribute(o,o=="popover"&&n==1?"":n))}}function he(e){return function(o){if(this.l){var n=this.l[o.type+e];if(o.t==null)o.t=le++;else if(o.t<n.u)return;return n(y.event?y.event(o):o)}}}function ie(e,o,n,t,r,a,s,i,p,u){var c,l,_,d,b,v,g,f,m,k,N,S,T,M,X,P,I,E=o.type;if(o.constructor!=null)return null;128&n.__u&&(p=!!(32&n.__u),a=[i=o.__e=n.__e]),(c=y.__b)&&c(o);e:if(typeof E=="function")try{if(f=o.props,m="prototype"in E&&E.prototype.render,k=(c=E.contextType)&&t[c.__c],N=c?k?k.props.value:c.__:t,n.__c?g=(l=o.__c=n.__c).__=l.__E:(m?o.__c=l=new E(f,N):(o.__c=l=new V(f,N),l.constructor=E,l.render=to),k&&k.sub(l),l.props=f,l.state||(l.state={}),l.context=N,l.__n=t,_=l.__d=!0,l.__h=[],l._sb=[]),m&&l.__s==null&&(l.__s=l.state),m&&E.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=A({},l.__s)),A(l.__s,E.getDerivedStateFromProps(f,l.__s))),d=l.props,b=l.state,l.__v=o,_)m&&E.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),m&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(m&&E.getDerivedStateFromProps==null&&f!==d&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(f,N),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(f,l.__s,N)===!1||o.__v==n.__v){for(o.__v!=n.__v&&(l.props=f,l.state=l.__s,l.__d=!1),o.__e=n.__e,o.__k=n.__k,o.__k.some(function(Y){Y&&(Y.__=o)}),S=0;S<l._sb.length;S++)l.__h.push(l._sb[S]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(f,l.__s,N),m&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(d,b,v)})}if(l.context=N,l.props=f,l.__P=e,l.__e=!1,T=y.__r,M=0,m){for(l.state=l.__s,l.__d=!1,T&&T(o),c=l.render(l.props,l.state,l.context),X=0;X<l._sb.length;X++)l.__h.push(l._sb[X]);l._sb=[]}else do l.__d=!1,T&&T(o),c=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++M<25);l.state=l.__s,l.getChildContext!=null&&(t=A(A({},t),l.getChildContext())),m&&!_&&l.getSnapshotBeforeUpdate!=null&&(v=l.getSnapshotBeforeUpdate(d,b)),P=c,c!=null&&c.type===L&&c.key==null&&(P=Ue(c.props.children)),i=ze(e,Q(P)?P:[P],o,n,t,r,a,s,i,p,u),l.base=o.__e,o.__u&=-161,l.__h.length&&s.push(l),g&&(l.__E=l.__=null)}catch(Y){if(o.__v=null,p||a!=null)if(Y.then){for(o.__u|=p?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;a[a.indexOf(i)]=null,o.__e=i}else for(I=a.length;I--;)se(a[I]);else o.__e=n.__e,o.__k=n.__k;y.__e(Y,o,n)}else a==null&&o.__v==n.__v?(o.__k=n.__k,o.__e=n.__e):i=o.__e=oo(n.__e,o,n,t,r,a,s,p,u);return(c=y.diffed)&&c(o),128&o.__u?void 0:i}function Fe(e,o,n){for(var t=0;t<n.length;t++)ue(n[t],n[++t],n[++t]);y.__c&&y.__c(o,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){y.__e(a,r.__v)}})}function Ue(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Q(e)?e.map(Ue):A({},e)}function oo(e,o,n,t,r,a,s,i,p){var u,c,l,_,d,b,v,g=n.props,f=o.props,m=o.type;if(m=="svg"?r="http://www.w3.org/2000/svg":m=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((d=a[u])&&"setAttribute"in d==!!m&&(m?d.localName==m:d.nodeType==3)){e=d,a[u]=null;break}}if(e==null){if(m==null)return document.createTextNode(f);e=document.createElementNS(r,m,f.is&&f),i&&(y.__m&&y.__m(o,a),i=!1),a=null}if(m==null)g===f||i&&e.data==f||(e.data=f);else{if(a=a&&K.call(e.childNodes),g=n.props||D,!i&&a!=null)for(g={},u=0;u<e.attributes.length;u++)g[(d=e.attributes[u]).name]=d.value;for(u in g)if(d=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=d;else if(!(u in f)){if(u=="value"&&"defaultValue"in f||u=="checked"&&"defaultChecked"in f)continue;R(e,u,null,d,r)}}for(u in f)d=f[u],u=="children"?_=d:u=="dangerouslySetInnerHTML"?c=d:u=="value"?b=d:u=="checked"?v=d:i&&typeof d!="function"||g[u]===d||R(e,u,d,g[u],r);if(c)i||l&&(c.__html==l.__html||c.__html==e.innerHTML)||(e.innerHTML=c.__html),o.__k=[];else if(l&&(e.innerHTML=""),ze(o.type=="template"?e.content:e,Q(_)?_:[_],o,n,t,m=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,s,a?a[0]:n.__k&&F(n,0),i,p),a!=null)for(u=a.length;u--;)se(a[u]);i||(u="value",m=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[u]||m=="progress"&&!b||m=="option"&&b!=g[u])&&R(e,u,b,g[u],r),u="checked",v!=null&&v!=e[u]&&R(e,u,v,g[u],r))}return e}function ue(e,o,n){try{if(typeof e=="function"){var t=typeof e.__u=="function";t&&e.__u(),t&&o==null||(e.__u=e(o))}else e.current=o}catch(r){y.__e(r,n)}}function Ie(e,o,n){var t,r;if(y.unmount&&y.unmount(e),(t=e.ref)&&(t.current&&t.current!=e.__e||ue(t,null,o)),(t=e.__c)!=null){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(a){y.__e(a,o)}t.base=t.__P=null}if(t=e.__k)for(r=0;r<t.length;r++)t[r]&&Ie(t[r],o,n||typeof e.type!="function");n||se(e.__e),e.__c=e.__=e.__e=void 0}function to(e,o,n){return this.constructor(e,n)}function fe(e,o,n){var t,r,a,s;o==document&&(o=document.documentElement),y.__&&y.__(e,o),r=(t=typeof n=="function")?null:n&&n.__k||o.__k,a=[],s=[],ie(o,e=(!t&&n||o).__k=Qe(L,null,[e]),r||D,D,o.namespaceURI,!t&&n?[n]:r?null:o.firstChild?K.call(o.childNodes):null,a,!t&&n?n:r?r.__e:o.firstChild,t,s),Fe(a,e,s)}K=Xe.slice,y={__e:function(e,o,n,t){for(var r,a,s;o=o.__;)if((r=o.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,t||{}),s=r.__d),s)return r.__E=r}catch(i){e=i}throw e}},Pe=0,Ge=function(e){return e!=null&&e.constructor==null},V.prototype.setState=function(e,o){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=A({},this.state),typeof e=="function"&&(e=e(A({},n),this.props)),e&&A(n,e),e!=null&&this.__v&&(o&&this._sb.push(o),_e(this))},V.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_e(this))},V.prototype.render=L,z=[],Ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,He=function(e,o){return e.__v.__b-o.__v.__b},q.__r=0,Me=/(PointerCapture)$|Capture$/i,le=0,ne=he(!1),ae=he(!0),Je=0;var no=0,Fo=Array.isArray;function h(e,o,n,t,r,a){o||(o={});var s,i,p=o;if("ref"in p)for(i in p={},o)i=="ref"?s=o[i]:p[i]=o[i];var u={type:e,props:p,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--no,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(s=e.defaultProps))for(i in s)p[i]===void 0&&(p[i]=s[i]);return y.vnode&&y.vnode(u),u}var ao=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id];return h("button",{type:"button",onClick:()=>n({[t.id]:{value:!0}},{event:!0}),children:t.text??t.id})};C("button",ao,{label:null});var j,x,te,ve,O=0,De=[],w=y,me=w.__b,ge=w.__r,be=w.diffed,ye=w.__c,xe=w.unmount,we=w.__;function pe(e,o){w.__h&&w.__h(x,e,O||o),O=0;var n=x.__H||(x.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function H(e){return O=1,ro(Be,e)}function ro(e,o,n){var t=pe(j++,2);if(t.t=e,!t.__c&&(t.__=[n?n(o):Be(void 0,o),function(i){var p=t.__N?t.__N[0]:t.__[0],u=t.t(p,i);p!==u&&(t.__N=[u,t.__[1]],t.__c.setState({}))}],t.__c=x,!x.__f)){var r=function(i,p,u){if(!t.__c.__H)return!0;var c=t.__c.__H.__.filter(function(_){return!!_.__c});if(c.every(function(_){return!_.__N}))return!a||a.call(this,i,p,u);var l=t.__c.props!==i;return c.forEach(function(_){if(_.__N){var d=_.__[0];_.__=_.__N,_.__N=void 0,d!==_.__[0]&&(l=!0)}}),a&&a.call(this,i,p,u)||l};x.__f=!0;var a=x.shouldComponentUpdate,s=x.componentWillUpdate;x.componentWillUpdate=function(i,p,u){if(this.__e){var c=a;a=void 0,r(i,p,u),a=c}s&&s.call(this,i,p,u)},x.shouldComponentUpdate=r}return t.__N||t.__}function U(e,o){var n=pe(j++,3);!w.__s&&je(n.__H,o)&&(n.__=e,n.u=o,x.__H.__h.push(n))}function lo(e){return O=5,so(function(){return{current:e}},[])}function so(e,o){var n=pe(j++,7);return je(n.__H,o)&&(n.__=e(),n.__H=o,n.__h=e),n.__}function io(){for(var e;e=De.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(W),e.__H.__h.forEach(re),e.__H.__h=[]}catch(o){e.__H.__h=[],w.__e(o,e.__v)}}w.__b=function(e){x=null,me&&me(e)},w.__=function(e,o){e&&o.__k&&o.__k.__m&&(e.__m=o.__k.__m),we&&we(e,o)},w.__r=function(e){ge&&ge(e),j=0;var o=(x=e.__c).__H;o&&(te===x?(o.__h=[],x.__h=[],o.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(o.__h.forEach(W),o.__h.forEach(re),o.__h=[],j=0)),te=x},w.diffed=function(e){be&&be(e);var o=e.__c;o&&o.__H&&(o.__H.__h.length&&(De.push(o)!==1&&ve===w.requestAnimationFrame||((ve=w.requestAnimationFrame)||uo)(io)),o.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),te=x=null},w.__c=function(e,o){o.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(t){return!t.__||re(t)})}catch(t){o.some(function(r){r.__h&&(r.__h=[])}),o=[],w.__e(t,n.__v)}}),ye&&ye(e,o)},w.unmount=function(e){xe&&xe(e);var o,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(t){try{W(t)}catch(r){o=r}}),n.__H=void 0,o&&w.__e(o,n.__v))};var ke=typeof requestAnimationFrame=="function";function uo(e){var o,n=function(){clearTimeout(t),ke&&cancelAnimationFrame(o),setTimeout(e)},t=setTimeout(n,35);ke&&(o=requestAnimationFrame(n))}function W(e){var o=x,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),x=o}function re(e){var o=x;e.__c=e.__(),x=o}function je(e,o){return!e||e.length!==o.length||o.some(function(n,t){return n!==e[t]})}function Be(e,o){return typeof o=="function"?o(e):o}var Ne=e=>e.trim()==="",Se=e=>isFinite(e),po=(e,o)=>String(e)!==o,co=(e,o,n)=>e>=o&&e<=n,_o=(e,o,n)=>Math.min(Math.max(e,o),n),G=({value:e,min:o=-1/0,max:n=1/0,commit:t})=>{let[r,a]=H(String(e)),[s,i]=H(e);U(()=>{a(String(e)),i(e)},[e]);function p(c){let l=String(c);if(a(l),Ne(l))return;let _=Number(l);!Se(_)||!co(_,o,n)||po(_,l)||(i(_),t(_))}function u(){if(Ne(r)||!Se(Number(r))){a(String(s));return}let c=Number(r),l=_o(c,o,n);a(String(l)),i(l),t(l)}return{value:e,text:r,setValue:p,handleBlur:u}},Z=e=>Array.isArray(e)&&e.every(o=>o!=null&&typeof o=="object"&&!Array.isArray(o)&&"label"in o&&"value"in o)?e:Array.isArray(e)?e.map(o=>({label:String(o),value:o})):e&&typeof e=="object"?Object.entries(e).map(([o,n])=>({label:o,value:n})):[],ho=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],r=Z(t.options).map(({label:a,value:s},i)=>{let p=t.value===s?"soso-selected":"";return h("button",{onClick:()=>n({[t.id]:{value:s}}),className:`${p}`,type:"button",children:a},a)});return h("div",{className:"soso-buttons",children:r})};C("buttons",ho,{value:e=>Z(e.options)[0]?.value});var fo=e=>"#ffffff",vo=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],[r,a]=H(t.value),[s,i]=H(t.value);U(()=>{a(t.value)},[t.value]);let p=l=>l.startsWith("#")&&l.length===7&&CSS.supports("color",l),u=l=>{let _=l.currentTarget.value,d=p(_)?_:s;n({[t.id]:{value:d}}),a(d)},c=l=>{let _=l.currentTarget.value;p(_)&&(n({[t.id]:{value:_}}),i(_))};return h(L,{children:[h("input",{type:"color",value:r,onInput:c,className:"soso-color-picker"}),h("input",{type:"text",className:"soso-fixed",size:"7",value:r,onInput:c,onChange:u})]})};C("color",vo,{value:fo});var mo=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id];switch(t.format){case"monospace":return h("span",{className:"soso-display soso-monospace",children:t.value});case"block":return h("pre",{className:"soso-display soso-monospace",children:t.value});case"html":return h("span",{className:"soso-display",dangerouslySetInnerHTML:{__html:t.value??""}});default:return h("span",{className:"soso-display",children:t.value})}};C("display",mo,{value:"",format:"text"});var go=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],r=lo(null),[a,s]=H(Array(t.samples).fill(0)),[i,p]=H({min:null,max:null});return U(()=>{s(u=>[...u,t.value].slice(-t.samples)),p(u=>({min:u.min===null?t.value:Math.min(u.min,t.value),max:u.max===null?t.value:Math.max(u.max,t.value)}))},[t]),U(()=>{let u=r.current;if(!u)return;let c=u.getContext("2d"),l=u.getBoundingClientRect(),_=window.devicePixelRatio||1,d=l.width,b=t.height;u.width=d*_,u.height=b*_,c.scale(_,_),u.style.width=d+"px",u.style.height=b+"px",c.clearRect(0,0,d,b);let v=u.closest(".soso-panel"),g=getComputedStyle(v).getPropertyValue("--panel-fg").trim()||"#aaa",f=t.min??i.min??0,m=t.max??i.max??1,k=m-f||1,N=1/(t.samples-1)*d;c.fillStyle=g,c.globalAlpha=.5,c.beginPath(),c.moveTo(0,b),a.forEach((S,T)=>{let M=(S-f)/k*b,X=T*N,P=b-M;c.lineTo(X,P)}),c.lineTo(d,b),c.fill(),c.globalAlpha=1,c.font="10px ui-monospace, monospace",c.textBaseline="top",c.textAlign="left",c.fillText(m,3,0),c.textBaseline="bottom",c.fillText(f,3,b)},[a,i,t]),h("canvas",{className:"soso-graph",ref:r,height:t.height})};C("graph",go,{height:60,samples:60});var Re=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id];if(!t.visible)return null;let r=Oe(t);if(!r)return null;let a=h(r,{nodes:e,treeNode:o,update:n});if(t.layout==="block")return a;let s=!(t.label===""||t.label===null);return h("div",{className:"soso-row",role:"group","aria-label":t.label??t.id,children:[s&&h("span",{className:"soso-label",children:t.label??t.id}),h("div",{className:"soso-control",children:a})]})},bo=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],r=o.nodes.map((p,u)=>h(Re,{nodes:e,treeNode:p,update:n},p.id)),a=t.expanded?"soso-expanded":"soso-collapsed",s=t.showLabel?"soso-show-label":"soso-hide-label",i=!(t.label===""||t.label===null);return h("div",{className:`soso-group ${a} ${s}`,children:[i&&h("span",{className:"soso-label",onClick:()=>{t.expandable&&n({[t.id]:{expanded:!t.expanded}})},children:[t.expandable&&h("span",{className:"soso-icon",children:"\u2303"}),t.label??t.id]}),h("div",{className:"soso-container",children:r})]})};C("group",bo,{layout:"block",expandable:!0,expanded:!0});var yo=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],{text:r,setValue:a,handleBlur:s}=G({value:t.value,min:t.min,max:t.max,commit:i=>n({[t.id]:{value:i}})});return h("input",{className:"soso-number-input",type:"text",value:r,onInput:i=>a(i.currentTarget.value),onChange:s})};C("number",yo,{value:()=>0});var Ee=(e,o)=>{let n=1/o;return Math.round(e*n)/n},xo=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],{x:r,y:a}=t.value,[s,i]=H(!1),[p,u]=H(null),[c,l]=H({height:176,width:176,space:6,radius:2});U(()=>{let v=document.querySelector(".soso-panel");if(!v)return;let g=getComputedStyle(v),f=g.getPropertyValue("--panel-width"),m=g.getPropertyValue("--label-width"),k=g.getPropertyValue("--panel-radius"),N=g.getPropertyValue("--panel-space"),S=parseFloat(f)-parseFloat(m)-2*parseFloat(N),T=parseFloat(k),M=parseFloat(N);l({width:S,height:S,radius:T,space:M})},[]);let _=G({value:t.value.x,min:t.minX,max:t.maxX,commit:v=>n({[t.id]:{value:{...t.value,x:v}}})}),d=G({value:t.value.y,min:t.minY,max:t.maxY,commit:v=>n({[t.id]:{value:{...t.value,y:v}}})});U(()=>{if(!s||!p)return;let v=document.body.style.cursor;document.body.style.cursor="grabbing";let g=k=>{let N=k.clientX??k.touches?.[0]?.clientX,S=k.clientY??k.touches?.[0]?.clientY;if(N===void 0||S===void 0)return;let T=N-p.pointerX,M=S-p.pointerY,X=p.valueX+T*t.scale,P=p.valueY+M*t.scale,I=Math.max(t.minX,Math.min(t.maxX,X)),E=Math.max(t.minY,Math.min(t.maxY,P)),Y=Ee(I,t.step),Ve=Ee(E,t.step);n({[t.id]:{value:{x:Y,y:Ve}}})},f=()=>{i(!1),u(null)},m=k=>(k.preventDefault(),!1);return document.addEventListener("mousemove",g),document.addEventListener("mouseup",f),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",f),()=>{document.body.style.cursor=v,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",f)}},[s,p,t]);let b=(v,g=null)=>{let f=v.clientX??v.touches?.[0]?.clientX,m=v.clientY??v.touches?.[0]?.clientY;i(!0),u({pointerX:f,pointerY:m,valueX:g?.x??t.value.x,valueY:g?.y??t.value.y})};return h(L,{children:[h("button",{onMouseDown:v=>{v.preventDefault(),b(v)},onTouchStart:v=>{v.preventDefault(),b(v)},className:`soso-translate ${s?"soso-selected":""}`,type:"button",style:{touchAction:"none",userSelect:"none"},children:"\u2316"}),h("input",{className:"soso-number-input soso-fixed",type:"text",size:"7",value:_.text,onInput:v=>_.setValue(v.currentTarget.value),onChange:_.handleBlur}),h("input",{className:"soso-number-input soso-fixed",type:"text",size:"7",value:d.text,onInput:v=>d.setValue(v.currentTarget.value),onChange:d.handleBlur}),s&&h("div",{className:"soso-pad2",children:h("svg",{width:c.width,height:c.height,style:{position:"absolute",top:0,left:0,borderRadius:c.radius},children:[h("rect",{width:c.width,height:c.height,fill:"transparent",className:"soso-border",rx:c.radius}),h("line",{x1:c.width/2,y1:0,x2:c.width/2,y2:c.height,className:"soso-grid"}),h("line",{x1:0,y1:c.height/2,x2:c.width,y2:c.height/2,className:"soso-grid"}),h("text",{x:c.space,y:c.space,className:"soso-label","dominant-baseline":"hanging","font-size":"10",children:[t.minX,",",t.minY]}),h("text",{x:c.width-c.space,y:c.space,"dominant-baseline":"hanging",className:"soso-label","font-size":"10","text-anchor":"end",children:[t.maxX,",",t.minY]}),h("text",{x:c.space,y:c.height-c.space,className:"soso-label","font-size":"10",children:[t.minX,",",t.maxY]}),h("text",{x:c.width-c.space,y:c.height-c.space,className:"soso-label","font-size":"10","text-anchor":"end",children:[t.maxX,",",t.maxY]}),h("circle",{cx:(r-t.minX)/(t.maxX-t.minX)*c.width,cy:(a-t.minY)/(t.maxY-t.minY)*c.height,r:6,className:"soso-indicator"})]})})]})};C("pad2",xo,{value:e=>({x:e.minX+(e.maxX-e.minX)*.5,y:e.minY+(e.maxY-e.minY)*.5}),scale:.01,step:.01,minX:-1,maxX:1,minY:-1,maxY:1});var wo=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],{text:r,setValue:a,handleBlur:s}=G({value:t.value,min:t.min,max:t.max,commit:i=>n({[t.id]:{value:i}})});return h(L,{children:[h("input",{type:"range",value:r,min:t.min,max:t.max,step:t.step??1,onInput:i=>a(i.currentTarget.value)}),h("input",{type:"text",size:"7",className:"soso-number-input soso-fixed",value:r,onInput:i=>a(i.currentTarget.value),onChange:s})]})};C("range",wo,{value:e=>e.min??0});var ko=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],r=Z(t.options),a=p=>{let u=Number(p.currentTarget.value),c=r[u].value;n({[t.id]:{value:c}})},s=r.map(({label:p},u)=>h("option",{value:u,children:p},p)),i=r.findIndex(({value:p})=>p===t.value);return h("select",{value:i<0?"":i,onChange:a,children:s})};C("select",ko,{value:e=>Z(e.options)[0]?.value});var No=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id],r=a=>{n({[t.id]:{value:a.currentTarget.value}})};return t.multiline?h("textarea",{value:t.value,onInput:r,rows:t.rows}):h("input",{type:"text",value:t.value,onInput:r})};C("text",No,{value:"",multiline:!1,rows:4});var So=({nodes:e,treeNode:o,update:n})=>{let t=e[o.id];return h("input",{type:"checkbox",checked:t.value,onInput:r=>n({[t.id]:{value:r.currentTarget.checked}})})};C("toggle",So,{value:e=>!1});var Eo='.soso-panel-container{position:fixed;top:0;right:0}.soso-panel{--panel-bg: hsl(230 7% 10%);--panel-fg: hsl(230 10% 75%);--panel-border: hsl(230 9% 18%);--panel-hover: hsl(230 9% 26%);--panel-pressed: hsl(230 7% 16%);--panel-low-emphasis: hsl(230 4% 55%);--panel-focus: var(--panel-fg);--panel-selection-fg: var(--panel-bg);--panel-selection-bg: var(--panel-fg);--value-number: hsl(220 80% 65%);--value-string: hsl(139 45% 56%);--panel-space: 4px;--panel-radius: 2px;--panel-width: 256px;--label-width: 80px;--row-height: 20px;--font-ui: system-ui, -apple-system, sans-serif;--font-value: ui-monospace, monospace;--font-size-normal: 11px;--line-height-normal: 1.4;--color-link: var(--value-number);--panel-tween-func: cubic-bezier(.25, .8, .5, 1);--panel-tween-duration: .2s;--checkbox-check-width: 3px;--checkbox-check-height: 9px;width:var(--panel-width);color:var(--panel-fg);font-family:var(--font-ui);font-size:var(--font-size-normal);line-height:var(--line-height-normal);box-sizing:border-box;font-variant-numeric:tabular-nums}.soso-panel .soso-row{display:flex;flex-direction:row;gap:var(--panel-space);padding:var(--panel-space) var(--panel-space)}.soso-panel .soso-row+.soso-row{padding-top:calc(var(--panel-space) * .5)}.soso-panel .soso-row:has(+.soso-row){padding-bottom:calc(var(--panel-space) * .5)}.soso-panel .soso-container .soso-container{border-bottom:1px solid var(--panel-border)}.soso-panel .soso-row .soso-label{display:flex;align-self:flex-start;align-items:center;line-height:1.2;min-height:20px;min-width:0;user-select:none;color:var(--panel-low-emphasis);flex:0 0 var(--label-width)}.soso-panel .soso-group{display:flex;flex-direction:column;background:var(--panel-bg);border-radius:var(--panel-radius)}.soso-panel-container>.soso-panel>.soso-group>.soso-label{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.soso-panel .soso-group>.soso-label{display:flex;align-items:center;user-select:none;background:var(--panel-border);border-radius:var(--panel-radius);height:var(--row-height);padding-left:var(--panel-space);gap:var(--panel-space)}.soso-panel .soso-group>.soso-label:has(>.soso-icon){cursor:pointer}.soso-panel .soso-group>.soso-label>.soso-icon{font-weight:700;font-size:10px;cursor:pointer}@media (prefers-reduced-motion: no-preference){.soso-panel .soso-group>.soso-label>.soso-icon{transition:transform var(--panel-tween-duration) var(--panel-tween-func)}}.soso-panel .soso-group.soso-expanded>.soso-label>.soso-icon{transform:rotate(180deg)}.soso-panel .soso-group>.soso-container{flex-direction:column;overflow:hidden;display:none}.soso-panel .soso-group.soso-expanded>.soso-container{display:flex}@supports (interpolate-size: allow-keywords){.soso-panel .soso-group>.soso-container{display:flex;interpolate-size:allow-keywords;height:0;opacity:0}@media (prefers-reduced-motion: no-preference){.soso-panel .soso-group>.soso-container{transition:height var(--panel-tween-duration) var(--panel-tween-func),padding var(--panel-tween-duration) var(--panel-tween-func),opacity var(--panel-tween-duration) var(--panel-tween-func)}}.soso-panel .soso-group.soso-expanded>.soso-container{height:auto;opacity:1}}.soso-panel-container>.soso-panel{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.soso-panel .soso-row .soso-control{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center;min-height:var(--row-height);gap:var(--panel-space)}.soso-panel button,.soso-panel input,.soso-panel select,.soso-panel textarea{font-size:inherit;font-family:inherit;width:100%;box-sizing:border-box;border:1px solid transparent;padding:0 var(--panel-space);border-radius:var(--panel-radius);background:var(--panel-border);color:var(--panel-fg)}.soso-panel button,.soso-panel select,.soso-panel input[type=text],.soso-panel input[type=range]{min-height:var(--row-height)}.soso-panel input[type=color]{height:var(--row-height)}.soso-panel button,.soso-panel select,.soso-panel input[type=checkbox],.soso-panel input[type=range],.soso-panel input[type=color]{cursor:pointer}.soso-panel input[type=text],.soso-panel textarea{cursor:text}.soso-panel button:focus-visible,.soso-panel select:focus-visible,.soso-panel input:focus-visible,.soso-panel textarea:focus-visible{outline:2px solid var(--panel-focus);outline-offset:0px}.soso-panel button:focus:not(:focus-visible),.soso-panel select:focus:not(:focus-visible),.soso-panel input:focus:not(:focus-visible),.soso-panel textarea:focus:not(:focus-visible){outline:none}.soso-panel button:hover:not(:active):not(.soso-selected),.soso-panel input:hover,.soso-panel select:hover,.soso-panel textarea:hover{background:var(--panel-hover)}.soso-panel button:active,.soso-panel button.soso-selected{background:var(--panel-fg);color:var(--panel-bg);border-radius:var(--panel-radius)}.soso-panel input::selection,.soso-panel textarea::selection{background:var(--panel-selection-bg);color:var(--panel-selection-fg)}.soso-panel textarea{resize:vertical;min-height:calc(var(--row-height) * 2 + var(--panel-space));line-height:var(--line-height-normal);color:var(--value-string);font-family:var(--font-value)}.soso-panel .soso-buttons{display:flex;flex-direction:row;flex:1;gap:var(--panel-space)}.soso-panel .soso-pad2{position:absolute;align-self:flex-start;margin-top:calc(var(--row-height) + var(--panel-space));width:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));height:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));background:var(--panel-bg);z-index:1001}.soso-panel .soso-pad2 .soso-border,.soso-panel .soso-pad2 .soso-grid{stroke:var(--panel-fg);stroke-opacity:.25}.soso-panel .soso-pad2 .soso-label{fill:var(--panel-fg);opacity:.5}.soso-panel .soso-pad2 .soso-indicator{fill:var(--panel-fg)}.soso-panel button.soso-translate{font-weight:bolder}.soso-panel button.soso-translate.soso-selected{cursor:grabbing}.soso-panel input[type=text]{color:var(--value-string);font-family:var(--font-value)}.soso-panel input[type=text].soso-number-input{color:var(--value-number)}.soso-panel input[type=number]::-webkit-inner-spin-button,.soso-panel input[type=number]::-webkit-outer-spin-button{appearance:none;margin:0}.soso-panel input[type=text].soso-fixed{width:60px}.soso-panel .soso-control>.soso-display{line-height:var(--row-height)}.soso-panel .soso-control>.soso-display.soso-monospace{font-family:var(--font-value)}.soso-panel .soso-display a{color:var(--color-link);text-decoration:underline}.soso-panel .soso-display a:hover{text-decoration:none}.soso-panel pre.soso-display{margin:0}.soso-panel input[type=checkbox]{margin:0;appearance:none;border-radius:var(--panel-radius);width:14px;height:14px;text-align:center}.soso-panel input[type=checkbox]:checked:before{content:"";display:flex;height:var(--checkbox-check-height);width:var(--checkbox-check-width);border-bottom:2px solid var(--panel-fg);border-right:2px solid var(--panel-fg);transform:rotate(45deg)}.soso-panel input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;margin:0;padding:0}.soso-panel input[type=range]::-webkit-slider-runnable-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.soso-panel input[type=range]::-moz-range-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.soso-panel input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);margin-top:-4px}.soso-panel input[type=range]::-moz-range-thumb{width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);border:none}.soso-panel input[type=color]{-webkit-appearance:none;border:1px solid var(--panel-border);padding:0;border-radius:var(--panel-radius);height:var(--row-height)}.soso-panel input[type=color]::-webkit-color-swatch-wrapper{padding:0}.soso-panel input[type=color]::-webkit-color-swatch{border:0}.soso-panel canvas.soso-graph{width:100%}',Co=0,To=e=>`node ${Co++}`,$e=e=>{let{id:o=To(),nodes:n=[],...t}=e,r={},a={id:o,nodes:[]},s={id:o},i=qe(e);for(let p in i)typeof i[p]=="function"?s[p]=i[p]({...i,...e}):s[p]=i[p];return Object.assign(s,t),r[o]=s,n.length>0&&n.forEach(p=>{let[u,c]=$e(p);Object.assign(r,u),a.nodes.push(c)}),[r,a]},Po=()=>{let e=document.createElement("div");return e.classList.add("soso-panel-container"),document.body.append(e),e},Ao=()=>{if(!document.querySelector("style[data-soso-panel]")){let e=document.createElement("style");e.textContent=Eo,e.setAttribute("data-soso-panel","true"),document.head.appendChild(e)}},Ce=Symbol("all"),Ho=class{constructor(e,o){let[n,t]=$e(e);this.nodes=n,this.root=t,this.container=o.mount??Po(),this.options=o,this.subscribers=new Map,this.raf=null,o.injectStyles&&Ao(),this.render()}render(){let e=()=>{fe(h("div",{className:`soso-panel ${this.options.classNames.join(" ")}`,children:h(Re,{nodes:this.nodes,treeNode:this.root,update:this.handleUpdate.bind(this)})}),this.container)};if(!this.options.throttleRendering){e();return}this.options.throttleRendering&&!this.raf&&(this.raf=requestAnimationFrame(()=>{e(),this.raf=null}))}handleUpdate(e,{silent:o=!1,event:n=!1}={}){if(typeof e!="object"){console.warn("could not set values: invalid values object");return}for(let t in e){let r=this.nodes[t];if(!r)continue;let a=e[t];n||(this.nodes[t]={...r,...a}),"value"in a&&!o&&this.notifySubscribers(t,e[t].value)}this.render()}notifySubscribers(e,o){this.subscribers.get(e)?.forEach(n=>n(o)),this.subscribers.get(Ce)?.forEach(n=>n(e,o))}subscribe(e,o){let n=typeof e=="string"?e:Ce,t=typeof o=="function"?o:typeof e=="function"?e:void 0;if(t===void 0){console.warn("could not subscribe: no handler");return}return this.subscribers.has(n)||this.subscribers.set(n,[]),this.subscribers.get(n).push(t),()=>{let r=this.subscribers.get(n),a=r.indexOf(t);a>-1?r.splice(a,1):console.warn("could not unsubscribe: could not find handler")}}set(e,o){let n={};for(let t in e)n[t]={value:e[t]};this.handleUpdate(n,o)}update(e,o){this.handleUpdate(e,{...o,event:!1})}get(){let e={};for(let o in this.nodes){let n=this.nodes[o]?.value;n!==void 0&&(e[o]=n)}return e}destroy(){this.raf&&cancelAnimationFrame(this.raf),fe(null,this.container),this.options.mount||this.container.remove(),this.subscribers.clear(),this.values={}}},B={create(e,o={}){let n=Array.isArray(e)?{type:"group",label:"controls",nodes:e}:e,t=new Ho(n,{throttleRendering:!0,injectStyles:!0,classNames:[],...o});return{subscribe:t.subscribe.bind(t),update:t.update.bind(t),set:t.set.bind(t),get:t.get.bind(t),destroy:t.destroy.bind(t)}}};var ee={label:"theming",type:"group",nodes:[{id:"display",type:"display",value:"all controls in one panel"},{id:"text",type:"text",value:"text"},{id:"number",type:"number",value:42},{id:"range",type:"range",min:0,max:100,value:50},{id:"color",type:"color",value:"#0066cc"},{id:"checkbox",type:"toggle",value:!0},{id:"select",type:"select",options:["A","B","C"]},{id:"toggle",type:"buttons",options:["1","2","3"]},{id:"vector",type:"pad2"},{id:"monitor",type:"graph",value:0},{id:"button",type:"button",text:"Action"}]},Mo=document.getElementById("container"),oe=()=>Mo.appendChild(document.createElement("div")),Xo=B.create(ee,{classNames:["soso-light"],mount:oe()}),Yo=B.create(ee,{classNames:["soso-high-contrast"],mount:oe()}),zo=B.create(ee,{classNames:["soso-solarized-dark"],mount:oe()}),Lo=B.create(ee,{classNames:["pocket-console"],mount:oe()});setInterval(()=>{let e={monitor:Math.random()};Xo.set(e),Yo.set(e),zo.set(e),Lo.set(e)},16);
